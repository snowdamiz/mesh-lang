# Roadmap: Mesh

## Milestones

- [x] **v1.0 MVP** - Phases 1-10 (shipped 2026-02-07)
- [x] **v1.1 Language Polish** - Phases 11-15 (shipped 2026-02-08)
- [x] **v1.2 Runtime & Type Fixes** - Phases 16-17 (shipped 2026-02-08)
- [x] **v1.3 Traits & Protocols** - Phases 18-22 (shipped 2026-02-08)
- [x] **v1.4 Compiler Polish** - Phases 23-25 (shipped 2026-02-08)
- [x] **v1.5 Compiler Correctness** - Phases 26-29 (shipped 2026-02-09)
- [x] **v1.6 Method Dot-Syntax** - Phases 30-32 (shipped 2026-02-09)
- [x] **v1.7 Loops & Iteration** - Phases 33-36 (shipped 2026-02-09)
- [x] **v1.8 Module System** - Phases 37-42 (shipped 2026-02-09)
- [x] **v1.9 Stdlib & Ergonomics** - Phases 43-48 (shipped 2026-02-10)
- [x] **v2.0 Database & Serialization** - Phases 49-54 (shipped 2026-02-12)
- [x] **v3.0 Production Backend** - Phases 55-58 (shipped 2026-02-12)
- [x] **v4.0 WebSocket Support** - Phases 59-62 (shipped 2026-02-12)
- [x] **v5.0 Distributed Actors** - Phases 63-69 (shipped 2026-02-13)
- [x] **v6.0 Website & Documentation** - Phases 70-73 (shipped 2026-02-13)
- [x] **v7.0 Iterator Protocol & Trait Ecosystem** - Phases 74-80 (shipped 2026-02-14)
- [x] **v8.0 Developer Tooling** - Phases 81-86 (shipped 2026-02-14)
- [ ] **v9.0 Mesher** - Phases 87-95 (in progress)

## Phases

<details>
<summary>v1.0 MVP (Phases 1-10) - SHIPPED 2026-02-07</summary>

See milestones/v1.0-ROADMAP.md for full phase details.
55 plans across 10 phases. 52,611 lines of Rust. 213 commits.

</details>

<details>
<summary>v1.1 Language Polish (Phases 11-15) - SHIPPED 2026-02-08</summary>

See milestones/v1.1-ROADMAP.md for full phase details.
10 plans across 5 phases. 56,539 lines of Rust (+3,928). 45 commits.

</details>

<details>
<summary>v1.2 Runtime & Type Fixes (Phases 16-17) - SHIPPED 2026-02-08</summary>

See milestones/v1.2-ROADMAP.md for full phase details.
6 plans across 2 phases. 57,657 lines of Rust (+1,118). 22 commits.

</details>

<details>
<summary>v1.3 Traits & Protocols (Phases 18-22) - SHIPPED 2026-02-08</summary>

See milestones/v1.3-ROADMAP.md for full phase details.
18 plans across 5 phases. 63,189 lines of Rust (+5,532). 65 commits.

</details>

<details>
<summary>v1.4 Compiler Polish (Phases 23-25) - SHIPPED 2026-02-08</summary>

See milestones/v1.4-ROADMAP.md for full phase details.
5 plans across 3 phases. 64,548 lines of Rust (+1,359). 13 commits.

</details>

<details>
<summary>v1.5 Compiler Correctness (Phases 26-29) - SHIPPED 2026-02-09</summary>

See milestones/v1.5-ROADMAP.md for full phase details.
6 plans across 4 phases. 66,521 lines of Rust (+1,973). 29 commits.

</details>

<details>
<summary>v1.6 Method Dot-Syntax (Phases 30-32) - SHIPPED 2026-02-09</summary>

See milestones/v1.6-ROADMAP.md for full phase details.
6 plans across 3 phases. 67,546 lines of Rust (+1,025). 24 commits.

</details>

<details>
<summary>v1.7 Loops & Iteration (Phases 33-36) - SHIPPED 2026-02-09</summary>

See milestones/v1.7-ROADMAP.md for full phase details.
8 plans across 4 phases. 70,501 lines of Rust (+2,955). 34 commits.

</details>

<details>
<summary>v1.8 Module System (Phases 37-42) - SHIPPED 2026-02-09</summary>

See milestones/v1.8-ROADMAP.md for full phase details.
12 plans across 6 phases. 73,384 lines of Rust (+2,883). 52 commits.

</details>

<details>
<summary>v1.9 Stdlib & Ergonomics (Phases 43-48) - SHIPPED 2026-02-10</summary>

See milestones/v1.9-ROADMAP.md for full phase details.
13 plans across 6 phases. 76,100 lines of Rust (+2,716). 56 commits.

</details>

<details>
<summary>v2.0 Database & Serialization (Phases 49-54) - SHIPPED 2026-02-12</summary>

See milestones/v2.0-ROADMAP.md for full phase details.
13 plans across 6 phases. 81,006 lines of Rust (+4,906). 52 commits.

</details>

<details>
<summary>v3.0 Production Backend (Phases 55-58) - SHIPPED 2026-02-12</summary>

See milestones/v3.0-ROADMAP.md for full phase details.
8 plans across 4 phases. 83,451 lines of Rust (+2,445). 33 commits.

</details>

<details>
<summary>v4.0 WebSocket Support (Phases 59-62) - SHIPPED 2026-02-12</summary>

See milestones/v4.0-ROADMAP.md for full phase details.
8 plans across 4 phases. ~84,400 lines of Rust (+~950). 38 commits.

</details>

<details>
<summary>v5.0 Distributed Actors (Phases 63-69) - SHIPPED 2026-02-13</summary>

See milestones/v5.0-ROADMAP.md for full phase details.
20 plans across 7 phases. 93,515 lines of Rust (+9,115). 75 commits.

</details>

<details>
<summary>v6.0 Website & Documentation (Phases 70-73) - SHIPPED 2026-02-13</summary>

See milestones/v6.0-ROADMAP.md for full phase details.
11 plans across 4 phases. 5,134 LOC website (Vue/TS/CSS/MD). 32 commits.

</details>

<details>
<summary>v7.0 Iterator Protocol & Trait Ecosystem (Phases 74-80) - SHIPPED 2026-02-14</summary>

See milestones/v7.0-ROADMAP.md for full phase details.
17 plans across 7 phases. 97,190 lines of Rust (+3,675). 84 commits.

</details>

<details>
<summary>v8.0 Developer Tooling (Phases 81-86) - SHIPPED 2026-02-14</summary>

See milestones/v8.0-ROADMAP.md for full phase details.
11 plans across 6 phases. 98,836 lines of Rust (+1,646). 59 commits.

</details>

### v9.0 Mesher (In Progress)

**Milestone Goal:** Build a full monitoring/observability SaaS platform ("Mesher") using Mesh for the entire backend, dogfooding every language feature under high-concurrency, high-throughput conditions. Separate Vue frontend in same monorepo. PostgreSQL for storage. Zero external dependencies beyond PG.

- [x] **Phase 87: Foundation** - Data model, database schema, storage writer, org/project tenancy (completed 2026-02-14)
- [x] **Phase 87.1: Issues Encountered** - Codegen + module system fixes for idiomatic Result handling and modular services (completed 2026-02-14)
- [x] **Phase 87.2: Refactor Phase 87 code to use cross-module services** (INSERTED, completed 2026-02-15)
- [x] **Phase 88: Ingestion Pipeline** - HTTP/WS event ingestion with DSN auth, rate limiting, supervised processing (completed 2026-02-15)
- [x] **Phase 89: Error Grouping & Issue Lifecycle** - Fingerprinting, issue creation, regression detection, state machine (completed 2026-02-15)
- [x] **Phase 90: Real-Time Streaming** - WebSocket dashboard streaming with rooms, filters, backpressure (completed 2026-02-15)
- [x] **Phase 91: REST API** - Search, filter, pagination, dashboard aggregation, project/alert/org CRUD, event detail (completed 2026-02-15)
- [x] **Phase 91.1: Idiomatic Refactor** - Pipe operators, String.join, shared helpers, DRY (INSERTED, completed 2026-02-15)
- [x] **Phase 92: Alerting System** - Rule engine, timer-driven evaluation, notifications, dedup/cooldown (completed 2026-02-15)
- [x] **Phase 93: Data Retention & Cleanup** - Retention policies, partition management, storage tracking, sampling (completed 2026-02-15)
- [x] **Phase 93.1: Issues Encountered** - Fix forward-reference compilation errors in detail.mpl and team.mpl (INSERTED, completed 2026-02-15)
- [x] **Phase 93.2: Fix Actor Spawn Segfault** - Actor wrapper+body ABI fix for parameterized actors (INSERTED, completed 2026-02-15)
- [ ] **Phase 94: Multi-Node Clustering** - Distributed actors, global registry, cross-node event routing and broadcast
- [ ] **Phase 95: Vue Frontend** - SPA dashboard with ECharts, TanStack tables, real-time WebSocket streaming

## Phase Details

### Phase 87: Foundation
**Goal**: All data types, database schema, and storage layer exist so that subsequent phases can store and retrieve events, issues, projects, and organizations
**Depends on**: Nothing (first phase of v9.0)
**Requirements**: ORG-01, ORG-02, ORG-03
**Success Criteria** (what must be TRUE):
  1. Mesh compiles and runs a multi-module Mesher project that defines Event, Issue, Project, Organization, and AlertRule structs with deriving(Json, Row)
  2. PostgreSQL schema exists with time-partitioned events table, issues table with UNIQUE(project_id, fingerprint), and organization/project tables
  3. StorageWriter service accumulates events in a buffer and flushes them to PostgreSQL in batches on a timer
  4. User can create organizations and projects via Mesh service calls, and the system generates unique DSN keys per project
**Plans:** 2 plans
Plans:
- [x] 87-01-PLAN.md -- Data types, PostgreSQL schema DDL, and query helpers
- [x] 87-02-PLAN.md -- Org/project/user services, StorageWriter, and main entry point

### Phase 87.1: Issues Encountered (INSERTED)

**Goal:** Fix 5 compiler bugs (codegen + module system) discovered during Phase 87 that block idiomatic Result handling and modular service architecture
**Depends on:** Phase 87
**Plans:** 2 plans

Plans:
- [x] 87.1-01-PLAN.md -- Codegen fixes: ? operator return type, Err(e) alloca domination, List.find Option matching
- [x] 87.1-02-PLAN.md -- Module system fixes: cross-module service export, polymorphic type variable normalization

### Phase 87.2: Refactor Phase 87 code to use cross-module services (INSERTED)

**Goal:** Refactor the Mesher application code from Phase 87 to use cross-module services now that Phase 87.1 fixed the compiler limitations. Move services out of main.mpl into proper modules, use ? operator for Result handling, and leverage polymorphic type exports.
**Depends on:** Phase 87.1
**Plans:** 2 plans

Plans:
- [x] 87.2-01-PLAN.md -- Extract OrgService, ProjectService, UserService into service modules
- [x] 87.2-02-PLAN.md -- Extract StorageWriter + buffer/flush logic, apply ? operator, slim main.mpl

### Phase 88: Ingestion Pipeline
**Goal**: External clients can send error events into the system via HTTP and WebSocket, with authentication, validation, rate limiting, and supervised actor-based processing
**Depends on**: Phase 87
**Requirements**: INGEST-01, INGEST-02, INGEST-03, INGEST-04, INGEST-05, INGEST-06, RESIL-01, RESIL-02, RESIL-03
**Success Criteria** (what must be TRUE):
  1. Client can POST an event to /api/v1/events with a DSN key and receive a 202 response with an event ID
  2. System validates events (required fields, UTC timestamps, size limits) and rejects malformed payloads with appropriate error codes
  3. System enforces per-project rate limits and returns 429 with Retry-After header when exceeded
  4. Client can stream events over a persistent WebSocket connection with crash-isolated actor-per-connection
  5. Event processing pipeline runs under a supervision tree that automatically restarts crashed processor actors
**Plans:** 6 plans
Plans:
- [x] 88-01-PLAN.md -- Runtime extension: response headers, 202/429 status codes, HTTP.response_with_headers API
- [x] 88-02-PLAN.md -- Core ingestion services: RateLimiter, EventProcessor, auth helpers, validation functions
- [x] 88-03-PLAN.md -- HTTP routes, WebSocket handler, supervision tree, main.mpl integration
- [x] 88-04-PLAN.md -- Gap closure: Fix Ws.serve codegen (duplicate intrinsic, bare-function fn_ptr/env_ptr splitting) and wire WebSocket server
- [x] 88-05-PLAN.md -- Gap closure: Health checker actor with Timer.sleep-based periodic monitoring
- [x] 88-06-PLAN.md -- Gap closure: Retry-After header on 429 responses, bulk endpoint event processing

### Phase 89: Error Grouping & Issue Lifecycle
**Goal**: Events are automatically grouped into issues via fingerprinting, and users can manage issue states with regression detection
**Depends on**: Phase 88
**Requirements**: GROUP-01, GROUP-02, GROUP-03, GROUP-04, GROUP-05, ISSUE-01, ISSUE-02, ISSUE-03, ISSUE-04, ISSUE-05
**Success Criteria** (what must be TRUE):
  1. System computes fingerprints from stack trace frames, falls back to exception type or raw message, and respects user-provided custom fingerprint overrides
  2. First occurrence of a fingerprint creates a new Issue; subsequent events increment the count and update last_seen
  3. User can transition issues between unresolved, resolved, and archived states, and the system detects regressions when a resolved issue receives a new event
  4. User can assign issues to team members and can delete/discard issues to suppress future events for that fingerprint
  5. System auto-escalates archived issues when a volume spike occurs for that fingerprint
**Plans:** 2 plans
Plans:
- [ ] 89-01-PLAN.md -- Fingerprint computation, issue upsert with regression detection, EventProcessor enrichment
- [x] 89-02-PLAN.md -- Issue management API (state transitions, assign, delete/discard), spike detection

### Phase 90: Real-Time Streaming
**Goal**: Connected dashboard clients receive new events and issue updates in real-time via WebSocket rooms with filtering and backpressure
**Depends on**: Phase 88
**Requirements**: STREAM-01, STREAM-02, STREAM-03, STREAM-04, STREAM-05
**Success Criteria** (what must be TRUE):
  1. Client can subscribe to a WebSocket stream and receive new events for a specific project in real-time
  2. Client can apply filters (level, environment) to the WebSocket stream and only receive matching events
  3. System pushes new issue notifications and issue count updates to all connected dashboards for that project
  4. System drops old queued events for slow clients instead of letting buffers grow unbounded
**Plans:** 3 plans

Plans:
- [x] 90-01-PLAN.md -- Typechecker gap closure (Ws.join/leave/broadcast/broadcast_except) + StreamManager service
- [x] 90-02-PLAN.md -- Subscription protocol, event/issue broadcasting, pipeline integration
- [x] 90-03-PLAN.md -- Backpressure buffer drain ticker (STREAM-05)

### Phase 91: REST API
**Goal**: Users can query, search, and browse all platform data through a complete REST API with pagination, aggregation, and CRUD operations
**Depends on**: Phase 89
**Requirements**: SEARCH-01, SEARCH-02, SEARCH-03, SEARCH-04, SEARCH-05, DASH-01, DASH-02, DASH-03, DASH-04, DASH-05, DASH-06, DETAIL-01, DETAIL-02, DETAIL-03, DETAIL-04, DETAIL-05, DETAIL-06, ORG-04, ORG-05
**Success Criteria** (what must be TRUE):
  1. User can filter issues by status, level, time range, and assignment; search event messages via full-text search; and filter events by tag key-value pairs
  2. User can paginate issue and event lists using keyset pagination with a default 24-hour time range
  3. Dashboard endpoints return event volume over time (hourly/daily buckets), error breakdown by level, top issues by frequency, event breakdown by tag, per-issue event timeline, and project health summary
  4. User can view full event payload, formatted stack traces, breadcrumbs, tags, user context, and navigate between events within an issue
  5. User can manage team membership with roles (owner/admin/member) and create API tokens for programmatic access
**Plans:** 3 plans
Plans:
- [x] 91-01-PLAN.md -- Search, filtering, and keyset pagination (SEARCH-01..05)
- [x] 91-02-PLAN.md -- Dashboard aggregation and event detail (DASH-01..06, DETAIL-01..06)
- [x] 91-03-PLAN.md -- Team membership and API token management (ORG-04, ORG-05)

### Phase 91.1: Refactor Mesher to use pipe operators and idiomatic Mesh features (INSERTED)

**Goal:** Refactor Mesher application code to use pipe operators and idiomatic Mesh features, making the codebase a showcase of idiomatic Mesh
**Depends on:** Phase 91
**Plans:** 2 plans

Plans:
- [x] 91.1-01-PLAN.md -- Extract shared helpers (to_json_array, query_or_default) and replace recursive JSON builders with String.join
- [x] 91.1-02-PLAN.md -- Pipe-chain HTTP router and data transform pipelines

### Phase 92: Alerting System
**Goal**: Users can define alert rules that the system evaluates on a timer, triggering notifications with deduplication and cooldown to prevent alert fatigue
**Depends on**: Phase 91
**Requirements**: ALERT-01, ALERT-02, ALERT-03, ALERT-04, ALERT-05, ALERT-06
**Success Criteria** (what must be TRUE):
  1. User can create alert rules with configurable conditions (event count above threshold in time window, new issue creation, issue regression)
  2. A single timer-driven evaluator actor checks all alert rules per tick and triggers matching alerts
  3. System delivers alert notifications via WebSocket to connected dashboards in real-time
  4. System enforces deduplication windows and cooldown periods to prevent duplicate and repeated alert firing
  5. User can manage alert states (active, acknowledged, resolved)
**Plans:** 3 plans

Plans:
- [x] 92-01-PLAN.md -- Schema extension (alerts table, cooldown columns), Alert type, query helpers
- [x] 92-02-PLAN.md -- Alert evaluator actor (timer-driven threshold evaluation) and event-based alert triggers
- [x] 92-03-PLAN.md -- HTTP API routes for alert rule CRUD and alert state management

### Phase 93: Data Retention & Cleanup
**Goal**: Stored event data is automatically cleaned up per project retention policies, with partition-based deletion and storage visibility
**Depends on**: Phase 87
**Requirements**: RETAIN-01, RETAIN-02, RETAIN-03, RETAIN-04
**Success Criteria** (what must be TRUE):
  1. User can configure retention period per project (30/60/90 days) and the system drops old partitions on schedule
  2. Issue summaries (counts, first/last seen) are preserved even after their underlying events are deleted
  3. User can view storage usage per project and configure event sampling rate for high-volume projects
**Plans:** 2 plans

Plans:
- [x] 93-01-PLAN.md -- Schema extension (retention columns), retention/storage/settings/sampling queries, retention cleaner actor
- [x] 93-02-PLAN.md -- Settings API handlers, sampling at ingestion, retention cleaner wiring, route registration

### Phase 93.2: Fix actor spawn segfault in project mode (INSERTED)

**Goal:** Fix ABI mismatch between actor spawn serialization and actor entry function signatures so actors with arguments receive correct typed values instead of raw buffer pointers
**Depends on:** Phase 93
**Plans:** 1 plan

Plans:
- [x] 93.2-01-PLAN.md -- Generate actor wrapper function for args deserialization, add e2e tests for parameterized actors

### Phase 93.1: Issues Encountered (INSERTED)

**Goal:** Fix 7 compilation errors (forward-reference violations and cascading type mismatches) in detail.mpl, team.mpl, and main.mpl to restore Mesher compilation
**Depends on:** Phase 93
**Plans:** 1 plan

Plans:
- [x] 93.1-01-PLAN.md -- Reorder functions to leaf-first in detail.mpl and team.mpl, verify cascading fix in main.mpl

### Phase 94: Multi-Node Clustering
**Goal**: Multiple Mesher nodes form a cluster and distribute event processing, service discovery, and WebSocket broadcasts across the mesh
**Depends on**: Phase 90
**Requirements**: CLUSTER-01, CLUSTER-02, CLUSTER-03, CLUSTER-04, CLUSTER-05
**Success Criteria** (what must be TRUE):
  1. Mesher nodes discover each other via Node.connect and form a mesh with automatic peer exchange
  2. Services (EventRouter, StorageWriter) register in the global process registry for cross-node discovery
  3. Events ingested on one node are routed to processors on other nodes, and WebSocket broadcasts reach dashboards on all nodes
  4. System spawns remote processor actors on other nodes when local load is high
**Plans:** 3 plans

Plans:
- [ ] 94-01-PLAN.md -- Node startup, mesh formation, and global service registration
- [ ] 94-02-PLAN.md -- Cross-node event routing and distributed service discovery
- [ ] 94-03-PLAN.md -- Load-based remote processor spawning with monitoring

### Phase 95: Vue Frontend
**Goal**: Users can interact with the entire Mesher platform through a Vue SPA with dashboards, event browsing, issue management, alerting, and real-time streaming
**Depends on**: Phase 91, Phase 90
**Requirements**: UI-01, UI-02, UI-03, UI-04, UI-05, UI-06, UI-07, UI-08
**Success Criteria** (what must be TRUE):
  1. User can view a project overview dashboard with ECharts time-series charts (event volume, error breakdown) and a TanStack-powered issue list
  2. User can browse and search events with filters, pagination, and view event detail with formatted stack traces, breadcrumbs, and tags
  3. User can manage issues (state transitions, assignment) and manage alert rules (create, edit, delete)
  4. User can see real-time event streaming via WebSocket updating the dashboard live
  5. User can manage organizations and projects through the UI
**Plans**: TBD

## Progress

**Execution Order:**
Phases execute in numeric order: 87 -> 87.1 -> 87.2 -> 88 -> 89 -> 90 -> 91 -> 91.1 -> 92 -> 93 -> 93.1 -> 93.2 -> 94 -> 95
Note: Phase 93 depends only on 87 (can run in parallel with 88-92 if desired). Phase 90 and 89 both depend on 88.

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|----------------|--------|-----------|
| 1-10 | v1.0 | 55/55 | Complete | 2026-02-07 |
| 11-15 | v1.1 | 10/10 | Complete | 2026-02-08 |
| 16-17 | v1.2 | 6/6 | Complete | 2026-02-08 |
| 18-22 | v1.3 | 18/18 | Complete | 2026-02-08 |
| 23-25 | v1.4 | 5/5 | Complete | 2026-02-08 |
| 26-29 | v1.5 | 6/6 | Complete | 2026-02-09 |
| 30-32 | v1.6 | 6/6 | Complete | 2026-02-09 |
| 33-36 | v1.7 | 8/8 | Complete | 2026-02-09 |
| 37-42 | v1.8 | 12/12 | Complete | 2026-02-09 |
| 43-48 | v1.9 | 13/13 | Complete | 2026-02-10 |
| 49-54 | v2.0 | 13/13 | Complete | 2026-02-12 |
| 55-58 | v3.0 | 8/8 | Complete | 2026-02-12 |
| 59-62 | v4.0 | 8/8 | Complete | 2026-02-12 |
| 63-69 | v5.0 | 20/20 | Complete | 2026-02-13 |
| 70-73 | v6.0 | 11/11 | Complete | 2026-02-13 |
| 74-80 | v7.0 | 17/17 | Complete | 2026-02-14 |
| 81-86 | v8.0 | 11/11 | Complete | 2026-02-14 |
| 87 | v9.0 | 2/2 | Complete | 2026-02-14 |
| 87.1 | v9.0 | 2/2 | Complete | 2026-02-14 |
| 87.2 | v9.0 | 2/2 | Complete | 2026-02-15 |
| 88 | v9.0 | 6/6 | Complete | 2026-02-15 |
| 89 | v9.0 | 2/2 | Complete | 2026-02-15 |
| 90 | v9.0 | 3/3 | Complete | 2026-02-15 |
| 91 | v9.0 | 3/3 | Complete | 2026-02-15 |
| 91.1 | v9.0 | 2/2 | Complete | 2026-02-15 |
| 92 | v9.0 | 3/3 | Complete | 2026-02-15 |
| 93 | v9.0 | 2/2 | Complete | 2026-02-15 |
| 93.1 | v9.0 | 1/1 | Complete | 2026-02-15 |
| 93.2 | v9.0 | 1/1 | Complete | 2026-02-15 |
| 94 | v9.0 | 0/3 | Planned | - |
| 95 | v9.0 | 0/TBD | Not started | - |

**Total: 99 phases shipped across 18 milestones. 269 plans completed. 12 phases planned for v9.0.**
