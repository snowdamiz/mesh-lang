# Phase 86: Documentation Corrections - Research

**Researched:** 2026-02-14
**Domain:** Website documentation accuracy (VitePress/Vue/Markdown)
**Confidence:** HIGH

## Summary

Phase 86 is a documentation-only phase with no code changes to the compiler or runtime. All changes target the website source files in `website/docs/`. The website is a VitePress site using Vue components and Markdown content, deployed to GitHub Pages at `meshlang.dev` (CNAME confirmed). The build output in `.vitepress/dist/` is gitignored and regenerated by the deploy workflow on push to main.

The investigation identified **every specific file and line** that needs changes across five requirements: wrong binary name (`mesh` instead of `meshc`), wrong/missing install command, stale version badge, incorrect compilation description, and broken code examples. The getting-started guide has the most issues -- it still references the pre-rename "build from source" workflow instead of the `curl | sh` install path, uses the wrong binary name throughout, and describes compilation incorrectly.

**Primary recommendation:** Edit 3 source files (1 Markdown, 1 Vue component, 1 VitePress config), totaling approximately 15 line-level changes. No new files needed. The `dist/` directory is gitignored and will be rebuilt automatically by the deploy workflow.

## Standard Stack

### Core
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| VitePress | ^1.6.4 | Static site generator | Already in use; Markdown + Vue components |
| Vue 3 | ^3.5.28 | UI framework for components | Already in use for landing page components |
| Tailwind CSS | ^4.1.18 | Styling | Already in use across all components |

No new libraries needed. This is a content-editing phase.

### Supporting
None needed.

### Alternatives Considered
None -- this is purely editing existing files.

## Architecture Patterns

### Website Source Structure
```
website/
  docs/
    .vitepress/
      config.mts           # VitePress config (meshVersion lives here)
      theme/
        components/
          landing/
            HeroSection.vue      # Version badge, hero description
            GetStartedCTA.vue    # Install command (curl | sh)
          docs/
            DocsVersionBadge.vue # Reads theme.meshVersion
      dist/                 # BUILD OUTPUT (gitignored, auto-rebuilt)
    docs/
      getting-started/
        index.md            # PRIMARY TARGET - most changes needed
      tooling/
        index.md            # Already correct (uses meshc throughout)
    public/
      install.sh            # Already deployed (from Phase 82)
      install.ps1           # Already deployed (from Phase 82)
      CNAME                 # Contains: meshlang.dev
```

### Pattern: VitePress Theme Config for Version
The version badge uses a custom `meshVersion` property in `themeConfig`:

```typescript
// Source: website/docs/.vitepress/config.mts line 76
themeConfig: {
    meshVersion: '0.1.0',  // <-- Change this
    // ...
}
```

This is consumed by `DocsVersionBadge.vue` (line 9) and `HeroSection.vue` (line 55) via `useData().theme.meshVersion`.

**Important:** The HeroSection version badge is **hardcoded** in the template, NOT reading from `theme.meshVersion`. It has inline text `Now in development &mdash; v0.1.0` at line 55. This must be changed to use the config value OR be updated inline.

### Anti-Patterns to Avoid
- **Editing dist/ files:** The `.vitepress/dist/` directory is a build artifact. Only edit source files. The deploy workflow rebuilds on push to main.
- **Inconsistent domain references:** The site uses `meshlang.dev` (CNAME, config.mts hostname, canonical URLs) but the install script references `mesh-lang.org`. The GetStartedCTA.vue currently uses `mesh-lang.org`. The REQUIREMENTS.md and install scripts both reference `mesh-lang.org/install.sh`. Keep `mesh-lang.org` for install script URLs (this appears to be a separate domain for raw script serving) and `meshlang.dev` for the website.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Version synchronization | Script to read Cargo.toml version | Hardcode in config.mts | Cargo.toml says `0.1.0` (crate version), website version tracks language milestones (v7.0). These are different version schemes. |
| Build output updates | Manual dist/ edits | VitePress build pipeline | deploy.yml rebuilds automatically on push to main |

**Key insight:** The Cargo.toml `version = "0.1.0"` is the crate/package version, not the language version. The language version tracks milestone tags (currently `v7.0`). The `meshVersion` in config.mts should reflect the language version that users see. The latest git tag is `v7.0`.

## Common Pitfalls

### Pitfall 1: Confusing Crate Version with Language Version
**What goes wrong:** Updating `meshVersion` to match `Cargo.toml` version `0.1.0` -- which is already the current value and changes nothing.
**Why it happens:** The Cargo.toml says `version = "0.1.0"` for the meshc crate, but the language itself is at milestone `v7.0` (latest git tag).
**How to avoid:** Use the language milestone version. The latest git tag is `v7.0`. The roadmap success criterion says "shows current version (not v0.1.0)".
**Warning signs:** If the version badge still says `v0.1.0` after the change, it wasn't updated.

### Pitfall 2: Wrong Install URL Domain
**What goes wrong:** Using `meshlang.dev/install.sh` when the install scripts are served at `mesh-lang.org/install.sh`.
**Why it happens:** The website itself is at `meshlang.dev` but the install script comment headers and REQUIREMENTS.md consistently reference `mesh-lang.org/install.sh`.
**How to avoid:** Check what URL the actual install script header uses (line 3 of `website/docs/public/install.sh`): `curl -sSf https://mesh-lang.org/install.sh | sh`. The GetStartedCTA.vue currently has `mesh-lang.org/install` (missing `.sh` extension). Use `mesh-lang.org/install.sh`.
**Warning signs:** The install command doesn't work because the URL is wrong or missing the `.sh` extension.

### Pitfall 3: Getting the Compile Command Wrong
**What goes wrong:** Replacing `mesh hello.mpl` with `meshc hello.mpl` -- but `meshc` doesn't accept bare file arguments. The actual command is `meshc build <dir>`.
**Why it happens:** The getting-started guide was written before the CLI was fully designed. The current CLI uses subcommands.
**How to avoid:** Check the actual CLI definition in `crates/meshc/src/main.rs`. The build command is `meshc build <dir>` where `<dir>` must contain a `main.mpl` and `mesh.toml`.
**Warning signs:** Users get "error: unrecognized subcommand" when they try `meshc hello.mpl`.

### Pitfall 4: Install Section Still Shows Build-from-Source
**What goes wrong:** The getting-started guide still tells users to install Rust and build from source, when Phase 82 delivered a `curl | sh` installer.
**Why it happens:** The guide was written before the install infrastructure existed.
**How to avoid:** Replace the entire "Installation" section with the `curl | sh` one-liner, then a "Verifying Installation" step using `meshc --version`.

### Pitfall 5: cd mesh vs cd mesh-lang
**What goes wrong:** The getting-started guide says `cd mesh` after `git clone https://github.com/snowdamiz/mesh-lang.git`, but `git clone` creates a directory named `mesh-lang` (matching the repo name).
**Why it happens:** The project was renamed from Snow to Mesh, and the directory name in the docs wasn't updated to match the git repo name.
**How to avoid:** If keeping the build-from-source section (as an alternative), use `cd mesh-lang`. However, the primary recommendation is to replace the build-from-source section entirely with the `curl | sh` installer.

## Code Examples

### Exact Changes Needed

#### File 1: `website/docs/docs/getting-started/index.md`

**DOCS-01 (Binary name):** Lines 45, 63, 93 use `mesh` where they should use `meshc`:
```markdown
# Line 45: ./target/release/mesh --version  -->  meshc --version
# Line 63: mesh hello.mpl                   -->  meshc build .
# Line 93: mesh greet.mpl                   -->  meshc build .
```

**DOCS-04 (Compilation description):** Lines 11, 16, 24 say "via Rust" / "through Rust":
```markdown
# Line 11: "native compilation via Rust"     -->  "native compilation via LLVM"
# Line 16: "Mesh compiles through Rust to produce fast native binaries"
#       -->  "Mesh compiles via LLVM to produce fast native binaries"
# Line 24: "Mesh compiles through Rust, so you need the Rust toolchain installed:"
#       -->  Replace entire section with curl | sh install
```

**DOCS-05 (Code examples work):** The current examples assume `mesh <file>.mpl` runs a single file directly. The actual CLI uses `meshc build <dir>` which requires a project directory with `mesh.toml`. The getting-started guide needs to either:
- (a) Show `meshc init` + `meshc build .` workflow (project-based), OR
- (b) Note that the examples show the project's `main.mpl` content and compilation uses `meshc build .`

The simplest approach: restructure examples to use the project workflow (`meshc init hello && cd hello`, edit `main.mpl`, `meshc build .`, `./hello`).

**Installation section rewrite:** Lines 22-48 currently show build-from-source with Rust prerequisite. Replace with:
```markdown
## Installation

Install Mesh with a single command:

\`\`\`bash
curl -sSf https://mesh-lang.org/install.sh | sh
\`\`\`

This downloads the latest `meshc` binary and adds it to your PATH.

### Verifying Installation

After installing, verify the compiler is available:

\`\`\`bash
meshc --version
\`\`\`

You should see the Mesh version number printed to the terminal.
```

#### File 2: `website/docs/.vitepress/theme/components/landing/HeroSection.vue`

**DOCS-03 (Version badge):** Line 55 is hardcoded:
```html
<!-- Current (line 55): -->
Now in development &mdash; v0.1.0

<!-- Should reference theme config or be updated to current version -->
```

Two approaches:
1. **Hardcode update:** Change `v0.1.0` to `v7.0` directly
2. **Dynamic:** Import `useData` and use `theme.meshVersion` (like DocsVersionBadge.vue does)

The dynamic approach is better for maintainability.

#### File 3: `website/docs/.vitepress/config.mts`

**DOCS-03 (Version):** Line 76:
```typescript
// Current:
meshVersion: '0.1.0',

// Change to:
meshVersion: '7.0',
```

#### File 4: `website/docs/.vitepress/theme/components/landing/GetStartedCTA.vue`

**DOCS-02 (Install command):** Line 11:
```typescript
// Current:
const installCommand = 'curl -sSf https://mesh-lang.org/install | sh'

// Change to (add .sh extension):
const installCommand = 'curl -sSf https://mesh-lang.org/install.sh | sh'
```

Note: The install script is served at `mesh-lang.org/install.sh` (with `.sh` extension). The current URL is missing the extension.

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Build from source (cargo build) | `curl -sSf mesh-lang.org/install.sh \| sh` | Phase 82 (v8.0) | Getting-started guide must be rewritten |
| Binary named `mesh` | Binary named `meshc` | Quick task 1 (commit 3fe109e1) | All `mesh` command references become `meshc` |
| `mesh <file>.mpl` (single-file) | `meshc build <dir>` (project-based) | CLI redesign | Code examples need project structure |
| "Compiles through Rust" | "Compiled via LLVM" (Rust is impl language) | Always was LLVM | Description correction |

**Deprecated/outdated:**
- "compiles through Rust" -- Mesh is WRITTEN in Rust but compiles via LLVM (inkwell 0.8.0, LLVM 21.1). Rust is the implementation language, not the compilation target.
- `mesh` binary name -- renamed to `meshc` during Snow-to-Mesh rename.
- `v0.1.0` version badge -- current language milestone is `v7.0` (latest git tag).

## Detailed File Inventory

### Files That Need Changes (Source Files Only)

| File | Changes | Requirements |
|------|---------|-------------|
| `website/docs/docs/getting-started/index.md` | Rewrite installation section, fix binary name, fix compilation description, update code examples | DOCS-01, DOCS-04, DOCS-05 |
| `website/docs/.vitepress/config.mts` | Update `meshVersion: '0.1.0'` to `'7.0'` | DOCS-03 |
| `website/docs/.vitepress/theme/components/landing/HeroSection.vue` | Update hardcoded version badge (line 55) to use `theme.meshVersion` or hardcode `v7.0` | DOCS-03 |
| `website/docs/.vitepress/theme/components/landing/GetStartedCTA.vue` | Fix install URL: add `.sh` extension | DOCS-02 |

### Files Already Correct (No Changes Needed)

| File | Status | Notes |
|------|--------|-------|
| `website/docs/docs/tooling/index.md` | Correct | Already uses `meshc` throughout. Note: uses `meshc new` but CLI actually has `meshc init` -- this is a separate issue outside DOCS-01 through DOCS-05 scope. |
| `website/docs/public/install.sh` | Correct | Deployed by Phase 82, references correct URLs |
| `website/docs/public/install.ps1` | Correct | Deployed by Phase 82 |
| `website/docs/public/CNAME` | Correct | Contains `meshlang.dev` |
| All other docs pages (`language-basics`, `type-system`, `concurrency`, etc.) | Correct | Don't reference `mesh` binary directly |
| `website/docs/.vitepress/theme/components/docs/DocsVersionBadge.vue` | Correct | Already reads from `theme.meshVersion` dynamically |

### Potential Out-of-Scope Issues Found

| Issue | File | Why Out of Scope |
|-------|------|-----------------|
| Tooling docs say `meshc new` but CLI has `meshc init` | `website/docs/docs/tooling/index.md` lines 111, 114, 234 | Not in DOCS-01 through DOCS-05 requirements |
| HeroSection description says "compiling to fast native binaries" (correct but vague) | `HeroSection.vue` line 64 | Not inaccurate, just less specific than getting-started |

## Open Questions

1. **What version string to use in the badge?**
   - What we know: Latest git tag is `v7.0`. Cargo.toml crate version is `0.1.0`. The roadmap says "current version (not v0.1.0)".
   - What's unclear: Whether the user wants `v7.0` (language milestone) or some other version scheme.
   - Recommendation: Use `7.0` in `meshVersion` config (displayed as `v7.0` by DocsVersionBadge.vue which prepends `v`). The HeroSection hardcodes `v0.1.0` with a `v` prefix, so use `v7.0` there.

2. **Should the getting-started guide keep a "Building from Source" alternative section?**
   - What we know: The primary install path is now `curl | sh`. The build-from-source instructions are outdated (`cargo build --release` doesn't account for LLVM dependency).
   - What's unclear: Whether power users/contributors still need build-from-source instructions in getting-started.
   - Recommendation: Replace entirely with `curl | sh`. Build-from-source instructions belong in a CONTRIBUTING.md or separate "Building from Source" page, not in getting-started.

3. **How should code examples be structured given project-based compilation?**
   - What we know: `meshc build <dir>` requires a project directory with `mesh.toml`. Single-file `mesh hello.mpl` is not supported.
   - What's unclear: Whether to show full `meshc init` workflow for each example or simplify.
   - Recommendation: Show `meshc init hello` once, then demonstrate editing `main.mpl` and running `meshc build .` + `./binary_name`. Subsequent examples just show "edit main.mpl" + rebuild.

## Sources

### Primary (HIGH confidence)
- `crates/meshc/src/main.rs` -- CLI subcommand definitions (Build, Init, Deps, Fmt, Repl, Lsp)
- `website/docs/.vitepress/config.mts` -- VitePress configuration with `meshVersion: '0.1.0'`
- `website/docs/.vitepress/theme/components/landing/HeroSection.vue` -- Hardcoded version badge at line 55
- `website/docs/.vitepress/theme/components/landing/GetStartedCTA.vue` -- Install command at line 11
- `website/docs/docs/getting-started/index.md` -- Full getting-started guide content
- `website/docs/public/install.sh` -- Install script with header comment showing correct URL
- `website/docs/public/CNAME` -- Confirms domain is `meshlang.dev`
- `.planning/phases/82-install-infrastructure/82-02-SUMMARY.md` -- Phase 82 completion details
- `.planning/REQUIREMENTS.md` -- DOCS-01 through DOCS-05 definitions
- `.planning/milestones/v8.0-ROADMAP.md` -- Success criteria
- `Cargo.toml` -- Workspace definition confirming `inkwell` with `llvm21-1` feature (LLVM compilation)
- `git tag --list` output -- Latest tag is `v7.0`
- `.github/workflows/deploy.yml` -- Deploy workflow confirms auto-rebuild on push to main

### Secondary (MEDIUM confidence)
- `.planning/research/PITFALLS.md` -- Pitfall 14 (Documentation Shows Wrong Install Commands) describes exact issue

### Tertiary (LOW confidence)
None -- all findings verified against source files.

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH -- direct inspection of all source files, no external dependencies
- Architecture: HIGH -- VitePress structure fully mapped, all affected files identified
- Pitfalls: HIGH -- every issue verified by reading actual source code and CLI definitions

**Research date:** 2026-02-14
**Valid until:** 2026-03-14 (stable -- website structure won't change unless someone rewrites it)
