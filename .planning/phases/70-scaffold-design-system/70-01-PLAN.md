---
phase: 70-scaffold-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/package.json
  - website/tsconfig.json
  - website/components.json
  - website/.vitepress/config.ts
  - website/.vitepress/theme/index.ts
  - website/.vitepress/theme/Layout.vue
  - website/.vitepress/theme/styles/main.css
  - website/.vitepress/theme/lib/utils.ts
  - website/docs/index.md
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Running npm run dev in /website starts a VitePress dev server without errors"
    - "Tailwind utility classes (e.g., bg-background, text-foreground) render correctly in the browser"
    - "shadcn-vue Button component renders with monochrome OKLCH colors"
    - "No default VitePress theme styles leak through (blank custom Layout.vue)"
  artifacts:
    - path: "website/package.json"
      provides: "Project manifest with VitePress, Tailwind v4, shadcn-vue dependencies"
      contains: "vitepress"
    - path: "website/.vitepress/config.ts"
      provides: "VitePress config with Tailwind plugin, appearance:true, path alias"
      contains: "appearance"
    - path: "website/.vitepress/theme/index.ts"
      provides: "Custom theme entry exporting Layout without default theme"
      contains: "satisfies Theme"
    - path: "website/.vitepress/theme/Layout.vue"
      provides: "Minimal root layout with Content component"
      contains: "Content"
    - path: "website/.vitepress/theme/styles/main.css"
      provides: "Tailwind imports + OKLCH CSS variables + @theme inline bridge + @custom-variant dark"
      contains: "@theme inline"
    - path: "website/.vitepress/theme/lib/utils.ts"
      provides: "cn() helper for shadcn-vue class merging"
      contains: "twMerge"
    - path: "website/tsconfig.json"
      provides: "TypeScript config with @/ path alias to .vitepress/theme/"
      contains: "@/*"
    - path: "website/components.json"
      provides: "shadcn-vue config with neutral base color and correct aliases"
      contains: "neutral"
  key_links:
    - from: "website/.vitepress/config.ts"
      to: "@tailwindcss/vite"
      via: "Vite plugin registration"
      pattern: "tailwindcss\\(\\)"
    - from: "website/.vitepress/theme/styles/main.css"
      to: "Tailwind"
      via: "@import with source directive"
      pattern: 'source\("\.\./\.\."'
    - from: "website/.vitepress/theme/index.ts"
      to: "website/.vitepress/theme/Layout.vue"
      via: "import and export as Theme"
      pattern: "import Layout"
---

<objective>
Scaffold the VitePress project in /website with a fully custom theme (no default theme), integrate Tailwind CSS v4 with monochrome OKLCH palette via @theme inline, and initialize shadcn-vue with Button, DropdownMenu, and Sheet components.

Purpose: This is the foundation every subsequent phase builds on. Without a working VitePress + Tailwind + shadcn-vue scaffold, no UI work can proceed.
Output: A working VitePress dev server with Tailwind utilities and shadcn-vue components rendering correctly.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/70-scaffold-design-system/70-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold VitePress project with npm dependencies</name>
  <files>
    website/package.json
    website/tsconfig.json
    website/docs/index.md
    .gitignore
  </files>
  <action>
Create the website/ directory at the repo root. Initialize with npm:

1. `mkdir -p website && cd website && npm init -y`
2. Install core dependencies:
   ```
   npm install vitepress vue
   npm install tailwindcss @tailwindcss/vite @tailwindcss/typography
   npm install class-variance-authority clsx tailwind-merge tw-animate-css
   npm install @vueuse/core
   npm install lucide-vue-next
   npm install -D typescript @types/node
   ```
3. Update package.json scripts section to:
   ```json
   "scripts": {
     "dev": "vitepress dev docs",
     "build": "vitepress build docs",
     "preview": "vitepress preview docs"
   }
   ```
4. Create website/tsconfig.json with:
   - target: ES2020, module: ESNext, moduleResolution: bundler, strict: true
   - jsx: preserve, baseUrl: "."
   - paths: { "@/*": ["./.vitepress/theme/*"] }
   - include: [".vitepress/**/*.ts", ".vitepress/**/*.vue", "docs/**/*.md"]

5. Create website/docs/index.md as a placeholder page:
   ```markdown
   ---
   title: Mesh Programming Language
   ---

   # Mesh

   Welcome to the Mesh programming language documentation.
   ```

6. Append to the repo root .gitignore (do NOT overwrite existing content):
   ```
   # Website
   website/node_modules/
   website/.vitepress/dist/
   website/.vitepress/cache/
   ```

Do NOT create a tailwind.config.js or postcss.config.js -- Tailwind v4 uses CSS-first config via @tailwindcss/vite plugin.
  </action>
  <verify>
Run `cd website && npm run dev` -- it will fail because no .vitepress/ config exists yet, but `ls website/node_modules/vitepress` should confirm the install. Run `cat website/package.json | grep vitepress` to confirm dependency.
  </verify>
  <done>
website/package.json exists with all dependencies listed. website/tsconfig.json has correct path aliases. website/docs/index.md placeholder exists. .gitignore updated.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create VitePress custom theme with Tailwind v4 + shadcn-vue foundation</name>
  <files>
    website/.vitepress/config.ts
    website/.vitepress/theme/index.ts
    website/.vitepress/theme/Layout.vue
    website/.vitepress/theme/styles/main.css
    website/.vitepress/theme/lib/utils.ts
    website/components.json
  </files>
  <action>
Create the VitePress custom theme infrastructure:

1. Create website/.vitepress/config.ts:
   - Import defineConfig from vitepress, tailwindcss from @tailwindcss/vite, path from node:path
   - Set title: 'Mesh', description: 'The Mesh Programming Language'
   - Set appearance: true (enables built-in dark mode + FOUC prevention)
   - Register tailwindcss() in vite.plugins array
   - Add vite.resolve.alias mapping '@' to path.resolve(__dirname, './theme')
   - Use the EXACT code from 70-RESEARCH.md Pattern 5

2. Create website/.vitepress/theme/styles/main.css with the COMPLETE CSS from 70-RESEARCH.md Pattern 4:
   - `@import "tailwindcss" source("../..");` -- the source("../..") is CRITICAL for Tailwind to scan .vitepress/ dotfile directory
   - `@import "tw-animate-css";`
   - `@custom-variant dark (&:where(.dark, .dark *));` -- required for class-based dark mode
   - `:root` block with all OKLCH CSS variables (zero chroma for monochrome)
   - `.dark` block with dark mode OKLCH variables
   - `@theme inline` block bridging CSS variables to Tailwind namespace (--color-background: var(--background), etc.)
   - `@layer base` block with border-border and bg-background body styles
   - Copy the CSS EXACTLY from the research -- do not modify OKLCH values

3. Create website/.vitepress/theme/lib/utils.ts:
   - Export cn() function using clsx + twMerge (exact code from research)

4. Create website/.vitepress/theme/index.ts:
   - Import Layout from './Layout.vue'
   - Import './styles/main.css'
   - Export as Theme type with Layout and empty enhanceApp
   - Do NOT import anything from 'vitepress/theme' (no default theme extension)

5. Create website/.vitepress/theme/Layout.vue as a minimal placeholder:
   ```vue
   <script setup lang="ts">
   </script>

   <template>
     <div class="min-h-screen bg-background text-foreground">
       <main class="mx-auto max-w-4xl px-4 py-8">
         <Content />
       </main>
     </div>
   </template>
   ```

6. Create website/components.json manually (do NOT run shadcn-vue init -- it may fail in VitePress):
   - style: "new-york" (not "default" -- deprecated)
   - typescript: true
   - tailwind.css: ".vitepress/theme/styles/main.css"
   - tailwind.baseColor: "neutral" (already zero-chroma OKLCH)
   - tailwind.cssVariables: true
   - All aliases pointing to @/ paths per 70-RESEARCH.md Pattern 6
   - iconLibrary: "lucide"

7. Add shadcn-vue components via CLI (from website/ directory):
   ```
   npx shadcn-vue@latest add button
   npx shadcn-vue@latest add dropdown-menu
   npx shadcn-vue@latest add sheet
   ```
   If the CLI fails, manually copy components from shadcn-vue source. The components.json must exist BEFORE running add commands.

After all files are created, run `cd website && npm run dev` to verify the site starts. Visit the URL in the terminal output and confirm:
- The page loads without errors
- "Mesh" heading from docs/index.md renders
- Background color matches the OKLCH background variable (white in light mode)
- No default VitePress styles appear (no sidebar, no default header)
  </action>
  <verify>
Run `cd website && npm run dev` -- VitePress dev server starts without errors. Open the URL in a browser (default http://localhost:5173). The page shows "Mesh" heading with monochrome background. Check browser DevTools: body should have bg-background class resolved to oklch(1 0 0). Check that no vitepress/theme CSS is loaded (inspect stylesheets).
  </verify>
  <done>
VitePress dev server runs. Custom Layout.vue renders without default theme styles. Tailwind utility classes resolve correctly (bg-background produces oklch(1 0 0) in light mode). shadcn-vue Button/DropdownMenu/Sheet components are installed in website/.vitepress/theme/components/ui/. The cn() utility exists and exports correctly.
  </done>
</task>

</tasks>

<verification>
1. `cd website && npm run build` succeeds without errors (production build)
2. `cd website && npm run preview` serves the built site
3. No default VitePress theme CSS rules present in the output
4. Tailwind utilities render in both dev and production builds (source("../..") working)
5. shadcn-vue components exist in website/.vitepress/theme/components/ui/
</verification>

<success_criteria>
- VitePress dev server starts with `npm run dev` and serves pages
- Custom theme Layout.vue renders Content without any default VitePress styling
- Tailwind CSS v4 utility classes work (bg-background, text-foreground resolve to OKLCH values)
- shadcn-vue Button, DropdownMenu, and Sheet components are installed and importable
- Production build (`npm run build`) succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/70-scaffold-design-system/70-01-SUMMARY.md`
</output>
