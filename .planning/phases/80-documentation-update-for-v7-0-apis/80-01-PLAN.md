---
phase: 80-documentation-update-for-v7-0-apis
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/docs/docs/iterators/index.md
  - website/docs/.vitepress/config.mts
autonomous: true

must_haves:
  truths:
    - "New Iterators page is accessible via sidebar navigation at /docs/iterators/"
    - "Page documents Iter.from() for creating iterators from collections"
    - "Page documents all 6 lazy combinators (map, filter, take, skip, enumerate, zip) with working code examples"
    - "Page documents all 6 terminal operations (count, sum, any, all, find, reduce) with working code examples"
    - "Page documents all 4 collect targets (List.collect, Map.collect, Set.collect, String.collect)"
    - "Page shows a multi-step pipeline example combining combinators, terminals, and collect"
    - "All code examples use verified syntax from E2E test files (interface keyword, not trait)"
  artifacts:
    - path: "website/docs/docs/iterators/index.md"
      provides: "Complete iterator pipeline documentation"
      min_lines: 280
    - path: "website/docs/.vitepress/config.mts"
      provides: "Sidebar entry for Iterators page"
      contains: "Iterators"
  key_links:
    - from: "website/docs/.vitepress/config.mts"
      to: "/docs/iterators/"
      via: "sidebar link entry"
      pattern: "link.*iterators"
---

<objective>
Create the new Iterators documentation page covering the full iterator pipeline ecosystem (Iter.from, lazy combinators, terminal operations, collect) and add it to the sidebar navigation.

Purpose: Users need a dedicated reference for the iterator protocol introduced in v7.0, which is one of the language's most significant feature sets. The existing docs have no coverage of iterators, combinators, or collect.

Output: New `/docs/iterators/index.md` page (~300-400 lines) + sidebar config update.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/80-documentation-update-for-v7-0-apis/80-RESEARCH.md

# Source files for code examples (authoritative syntax)
@tests/e2e/iterator_iterable.mpl
@tests/e2e/iter_map_filter.mpl
@tests/e2e/iter_take_skip.mpl
@tests/e2e/iter_enumerate_zip.mpl
@tests/e2e/iter_terminals.mpl
@tests/e2e/iter_pipeline.mpl
@tests/e2e/collect_list.mpl
@tests/e2e/collect_map.mpl
@tests/e2e/collect_set_string.mpl

# Existing docs for style/pattern reference
@website/docs/docs/type-system/index.md
@website/docs/docs/language-basics/index.md
@website/docs/.vitepress/config.mts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Iterators documentation page</name>
  <files>website/docs/docs/iterators/index.md</files>
  <action>
Create `website/docs/docs/iterators/index.md` with the following structure. All code examples MUST come from verified E2E test files -- do NOT invent syntax.

**Frontmatter:**
```yaml
---
title: Iterators
---
```

**Page structure (sections):**

1. **# Iterators** -- introductory paragraph explaining that Mesh provides a lazy iterator protocol for composing data transformations as pipelines. Mention the pipe operator `|>` for chaining. Explain that iterators are lazy (no intermediate allocations).

2. **## Creating Iterators** -- Show `Iter.from()` to create iterators from lists, maps, sets, and ranges. Show `for...in` loop desugaring through the Iterable protocol. Code example from `iterator_iterable.mpl`.

3. **## Lazy Combinators** -- Explain that combinators transform iterators without consuming them (lazy evaluation). Each gets a subsection:
   - **### map** -- `Iter.map(fn x -> x * 2 end)` transforms each element. From `iter_map_filter.mpl`.
   - **### filter** -- `Iter.filter(fn x -> x > 5 end)` keeps matching elements. From `iter_map_filter.mpl`.
   - **### take and skip** -- `Iter.take(3)` limits to first N, `Iter.skip(2)` skips first N. From `iter_take_skip.mpl`.
   - **### enumerate** -- `Iter.enumerate()` pairs elements with indices `{index, value}`. From `iter_enumerate_zip.mpl`.
   - **### zip** -- `Iter.zip(other_iter)` combines two iterators into pairs. From `iter_enumerate_zip.mpl`.

4. **## Terminal Operations** -- Explain that terminals consume an iterator and produce a single value. Each gets a subsection:
   - **### count** -- `Iter.count()` returns the number of elements. From `iter_terminals.mpl`.
   - **### sum** -- `Iter.sum()` adds all integer elements. From `iter_terminals.mpl`.
   - **### any and all** -- `Iter.any(predicate)` and `Iter.all(predicate)` test conditions. From `iter_terminals.mpl`.
   - **### find** -- `Iter.find(predicate)` returns the first matching element. Include per research recommendation (fully wired in compiler and runtime).
   - **### reduce** -- `Iter.reduce(initial, fn acc, x -> ... end)` folds with accumulator. From `iter_terminals.mpl`.

5. **## Collecting Results** -- Explain how to materialize iterators into concrete collections:
   - **### List.collect** -- `Iter.from(list) |> Iter.map(...) |> List.collect()`. From `collect_list.mpl`.
   - **### Map.collect** -- `Iter.from(list) |> Iter.enumerate() |> Map.collect()`. From `collect_map.mpl`.
   - **### Set.collect** -- `Iter.from([1,2,2,3]) |> Set.collect()`. From `collect_set_string.mpl`.
   - **### String.collect** -- `Iter.from(["hello", " ", "world"]) |> String.collect()`. From `collect_set_string.mpl`.

6. **## Building Pipelines** -- Show a complete multi-step pipeline that combines creation, multiple combinators, and a terminal or collect. Use `iter_pipeline.mpl` as the authoritative example. Emphasize left-to-right readability and laziness (short-circuit with take).

7. **## Next Steps** -- Links to:
   - [Type System](/docs/type-system/) -- interfaces, associated types, and traits that power iterators
   - [Syntax Cheatsheet](/docs/cheatsheet/) -- quick reference for all Mesh syntax

**Style rules:**
- Match existing docs tone (concise, practical, code-first)
- Use `mesh` code fence language for syntax highlighting
- Show complete, runnable programs where practical (wrap in `fn main() do ... end`)
- For conceptual snippets showing just the pipeline expression, wrapping in main is optional
- Use `##` for main sections, `###` for subsections (TOC shows h2+h3)
- Use the `interface` keyword in any trait-related code, never `trait`
  </action>
  <verify>
1. File exists at `website/docs/docs/iterators/index.md`
2. File has valid frontmatter with `title: Iterators`
3. File contains sections: Creating Iterators, Lazy Combinators, Terminal Operations, Collecting Results, Building Pipelines, Next Steps
4. All code examples use `mesh` code fences
5. No use of `trait` keyword in code examples
6. File is ~280-400 lines
  </verify>
  <done>Iterators documentation page exists with complete coverage of Iter.from, all 6 combinators, all 6 terminals, all 4 collect targets, and pipeline composition examples</done>
</task>

<task type="auto">
  <name>Task 2: Add Iterators to sidebar configuration</name>
  <files>website/docs/.vitepress/config.mts</files>
  <action>
In `website/docs/.vitepress/config.mts`, add the Iterators page to the sidebar in the "Language Guide" group. Insert it after "Type System" and before "Concurrency" to follow the learning progression (basics -> types -> iterators -> concurrency).

Change the Language Guide items from:
```typescript
items: [
  { text: 'Language Basics', link: '/docs/language-basics/' },
  { text: 'Type System', link: '/docs/type-system/' },
  { text: 'Concurrency', link: '/docs/concurrency/' },
],
```

To:
```typescript
items: [
  { text: 'Language Basics', link: '/docs/language-basics/' },
  { text: 'Type System', link: '/docs/type-system/' },
  { text: 'Iterators', link: '/docs/iterators/' },
  { text: 'Concurrency', link: '/docs/concurrency/' },
],
```

This is a single line addition. Do NOT change any other sidebar entries.
  </action>
  <verify>
1. `grep -c "Iterators" website/docs/.vitepress/config.mts` returns 1
2. The Iterators entry appears between Type System and Concurrency
  </verify>
  <done>Sidebar configuration includes Iterators page in the correct position within Language Guide</done>
</task>

</tasks>

<verification>
1. `ls website/docs/docs/iterators/index.md` -- file exists
2. `grep "title: Iterators" website/docs/docs/iterators/index.md` -- frontmatter present
3. `grep "Iterators" website/docs/.vitepress/config.mts` -- sidebar entry present
4. `grep -c "trait " website/docs/docs/iterators/index.md` -- should be 0 (no `trait` keyword in code)
5. Count sections: `grep "^##" website/docs/docs/iterators/index.md` -- shows all major sections
</verification>

<success_criteria>
- New Iterators page created with ~280-400 lines of documentation
- All 6 combinators documented with code examples
- All 6 terminals documented with code examples
- All 4 collect targets documented with code examples
- Pipeline composition example present
- Sidebar updated with Iterators entry in correct position
- All code examples use verified E2E syntax
</success_criteria>

<output>
After completion, create `.planning/phases/80-documentation-update-for-v7-0-apis/80-01-SUMMARY.md`
</output>
