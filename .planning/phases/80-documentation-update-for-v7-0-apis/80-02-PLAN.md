---
phase: 80-documentation-update-for-v7-0-apis
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - website/docs/docs/type-system/index.md
  - website/docs/docs/cheatsheet/index.md
  - website/docs/docs/language-basics/index.md
autonomous: true

must_haves:
  truths:
    - "Type System page shows how to define custom interfaces with `interface ... do ... end` syntax"
    - "Type System page documents associated types with `type Item` and `Self.Item` resolution"
    - "Type System page documents numeric traits (Add, Sub, Mul, Div, Neg) with operator overloading examples"
    - "Type System page documents From/Into conversion with user-defined and built-in examples"
    - "Type System page documents ? operator auto-converting error types via From"
    - "Cheatsheet has entries for interface definition, associated types, iterator pipeline, From/Into, numeric traits, and collect"
    - "Language Basics page links to Iterators page in What's Next section"
    - "All code examples use `interface` keyword, never `trait` keyword"
    - "Incorrect 'trait keyword' text on existing Type System page is corrected to 'interface keyword'"
  artifacts:
    - path: "website/docs/docs/type-system/index.md"
      provides: "Updated type system docs with v7.0 features"
      contains: "interface"
    - path: "website/docs/docs/cheatsheet/index.md"
      provides: "Updated cheatsheet with v7.0 syntax entries"
      contains: "Iter.from"
    - path: "website/docs/docs/language-basics/index.md"
      provides: "Updated cross-links to Iterators page"
      contains: "/docs/iterators/"
  key_links:
    - from: "website/docs/docs/type-system/index.md"
      to: "/docs/iterators/"
      via: "Next Steps link"
      pattern: "Iterators.*iterators"
    - from: "website/docs/docs/language-basics/index.md"
      to: "/docs/iterators/"
      via: "What's Next link"
      pattern: "Iterators.*iterators"
    - from: "website/docs/docs/cheatsheet/index.md"
      to: "/docs/type-system/"
      via: "See links"
      pattern: "Type System"
---

<objective>
Update three existing documentation pages to cover v7.0 features: add custom interfaces, associated types, numeric traits, and From/Into to the Type System page; add v7.0 syntax entries to the Cheatsheet; and update Language Basics cross-links.

Purpose: The existing Type System page incorrectly references the `trait` keyword and lacks coverage of custom interface definitions, associated types, numeric traits, and From/Into conversion. The Cheatsheet is missing all v7.0 syntax entries. Language Basics needs to link to the new Iterators page.

Output: Three updated documentation files with complete v7.0 coverage.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/80-documentation-update-for-v7-0-apis/80-RESEARCH.md

# Files being modified
@website/docs/docs/type-system/index.md
@website/docs/docs/cheatsheet/index.md
@website/docs/docs/language-basics/index.md

# Source files for code examples (authoritative syntax)
@tests/e2e/assoc_type_basic.mpl
@tests/e2e/assoc_type_multiple.mpl
@tests/e2e/numeric_traits.mpl
@tests/e2e/numeric_neg.mpl
@tests/e2e/from_user_defined.mpl
@tests/e2e/from_float_from_int.mpl
@tests/e2e/from_string_from_int.mpl
@tests/e2e/from_try_error_conversion.mpl
@tests/e2e/from_try_struct_error.mpl
@tests/e2e/iter_pipeline.mpl
@tests/e2e/collect_list.mpl
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Type System page with v7.0 features</name>
  <files>website/docs/docs/type-system/index.md</files>
  <action>
Update `website/docs/docs/type-system/index.md` with the following changes. All code examples MUST come from verified E2E test files.

**Fix 1: Correct the Traits section header text (line ~208)**

The current text says:
> "Traits define shared behavior that types can implement. Define a trait with the `trait` keyword and implement it with `impl`:"

Change to:
> "Traits define shared behavior that types can implement. Define a trait with the `interface` keyword and implement it with `impl`:"

**Fix 2: Add interface definition example to Traits section**

Replace the existing Traits section code example (the simple Pair struct example at line ~211-221 that doesn't actually show trait definition) with a proper example showing how to define and implement a custom interface:

```mesh
interface Greeter do
  fn greet(self) -> String
end

struct Person do
  name :: String
end

impl Greeter for Person do
  fn greet(self) -> String do
    "Hello, I'm ${self.name}"
  end
end

fn main() do
  let p = Person { name: "Alice" }
  println(p.greet())
end
```

Keep the existing Built-in Traits table and Trait Bounds subsection unchanged.

**Addition 1: Add "Associated Types" section AFTER the Deriving section (after "Available Derives" table, before "Next Steps")**

New section:

```markdown
## Associated Types

Interfaces can declare associated types -- type members that implementing types must define. This enables generic protocols where the concrete types are determined by the implementation:

\`\`\`mesh
interface Container do
  type Item
  fn first(self) -> Self.Item
end

struct IntBox do
  value :: Int
end

impl Container for IntBox do
  type Item = Int
  fn first(self) -> Int do
    self.value
  end
end

fn main() do
  let b = IntBox { value: 42 }
  println("${b.first()}")
end
\`\`\`

Use `Self.Item` in method signatures to reference the associated type. The compiler resolves it to the concrete type from each implementation.

Interfaces can have multiple associated types:

\`\`\`mesh
interface Mapper do
  type Input
  type Output
  fn apply(self) -> Self.Output
end
\`\`\`
```

Source: `tests/e2e/assoc_type_basic.mpl`, `tests/e2e/assoc_type_multiple.mpl`

**Addition 2: Add "Numeric Traits" section after Associated Types**

```markdown
## Numeric Traits

Mesh provides built-in traits for arithmetic operators. Implement them to use `+`, `-`, `*`, `/` with your custom types:

| Trait | Operator | Method |
|-------|----------|--------|
| `Add` | `+` | `add(self, other)` |
| `Sub` | `-` | `sub(self, other)` |
| `Mul` | `*` | `mul(self, other)` |
| `Div` | `/` | `div(self, other)` |
| `Neg` | `-` (unary) | `neg(self)` |

Each numeric trait has an associated `type Output` that determines the result type:

\`\`\`mesh
struct Vec2 do
  x :: Float
  y :: Float
end

impl Add for Vec2 do
  type Output = Vec2
  fn add(self, other :: Vec2) -> Vec2 do
    Vec2 { x: self.x + other.x, y: self.y + other.y }
  end
end

impl Neg for Vec2 do
  type Output = Vec2
  fn neg(self) -> Vec2 do
    Vec2 { x: 0.0 - self.x, y: 0.0 - self.y }
  end
end

fn main() do
  let a = Vec2 { x: 1.0, y: 2.0 }
  let b = Vec2 { x: 3.0, y: 4.0 }
  let sum = a + b
  let neg = -a
  println("${sum.x}, ${sum.y}")
  println("${neg.x}, ${neg.y}")
end
\`\`\`
```

Source: `tests/e2e/numeric_traits.mpl`, `tests/e2e/numeric_neg.mpl`

**Addition 3: Add "From/Into Conversion" section after Numeric Traits**

```markdown
## From/Into Conversion

The `From` trait defines how to convert one type into another. Implement `From<SourceType> for TargetType` with a `from` function:

\`\`\`mesh
struct Wrapper do
  value :: Int
end

impl From<Int> for Wrapper do
  fn from(n :: Int) -> Wrapper do
    Wrapper { value: n * 2 }
  end
end

fn main() do
  let w = Wrapper.from(21)
  println("${w.value}")
end
\`\`\`

### Built-in Conversions

Mesh provides built-in `From` implementations for common type conversions:

| Conversion | Example | Result |
|------------|---------|--------|
| Int to Float | `Float.from(42)` | `42.0` |
| Int to String | `String.from(42)` | `"42"` |
| Float to String | `String.from(3.14)` | `"3.14"` |
| Bool to String | `String.from(true)` | `"true"` |

### Error Type Conversion with ?

When you implement `From<SourceError> for TargetError`, the `?` operator automatically converts error types. This lets you compose functions with different error types:

\`\`\`mesh
struct AppError do
  message :: String
end

impl From<String> for AppError do
  fn from(msg :: String) -> AppError do
    AppError { message: msg }
  end
end

fn risky() -> Int!String do
  Err("something failed")
end

fn process() -> Int!AppError do
  let n = risky()?    # auto-converts String error to AppError
  Ok(n + 1)
end

fn main() do
  let r = process()
  case r do
    Ok(val) -> println("${val}")
    Err(e) -> println(e.message)
  end
end
\`\`\`
```

Source: `tests/e2e/from_user_defined.mpl`, `tests/e2e/from_try_struct_error.mpl`

**Fix 3: Update the "Next Steps" section**

Change from:
```markdown
## Next Steps

- [Concurrency](/docs/concurrency/) -- actors, message passing, and supervision
- [Syntax Cheatsheet](/docs/cheatsheet/) -- quick reference for all Mesh syntax
```

To:
```markdown
## Next Steps

- [Iterators](/docs/iterators/) -- lazy iterator pipelines, combinators, and collection materialization
- [Concurrency](/docs/concurrency/) -- actors, message passing, and supervision
- [Syntax Cheatsheet](/docs/cheatsheet/) -- quick reference for all Mesh syntax
```
  </action>
  <verify>
1. `grep "interface keyword" website/docs/docs/type-system/index.md` -- finds the corrected text
2. `grep -c "interface" website/docs/docs/type-system/index.md` -- multiple occurrences (keyword in code examples)
3. `grep "Associated Types" website/docs/docs/type-system/index.md` -- section exists
4. `grep "Numeric Traits" website/docs/docs/type-system/index.md` -- section exists
5. `grep "From/Into" website/docs/docs/type-system/index.md` -- section exists
6. `grep "/docs/iterators/" website/docs/docs/type-system/index.md` -- cross-link exists
7. `grep -c "trait keyword" website/docs/docs/type-system/index.md` -- returns 0 (old incorrect text removed)
  </verify>
  <done>Type System page corrected to use `interface` keyword, and expanded with Associated Types, Numeric Traits, and From/Into Conversion sections with verified code examples</done>
</task>

<task type="auto">
  <name>Task 2: Update Cheatsheet and Language Basics pages</name>
  <files>website/docs/docs/cheatsheet/index.md, website/docs/docs/language-basics/index.md</files>
  <action>
**Cheatsheet updates (`website/docs/docs/cheatsheet/index.md`):**

1. **Update the Traits section** (currently at line ~118). Replace the existing Traits section content with an expanded version that includes interface definition, associated types, and deriving:

```markdown
## Interfaces & Traits

\`\`\`mesh
# Define a custom interface
interface Greeter do
  fn greet(self) -> String
end

# Implement for a type
impl Greeter for Person do
  fn greet(self) -> String do
    "Hello"
  end
end

# Associated types
interface Container do
  type Item
  fn first(self) -> Self.Item
end

impl Container for MyBox do
  type Item = Int
  fn first(self) -> Int do self.value end
end

# Deriving built-in traits
struct Tag do
  id :: Int
end deriving(Eq, Hash)

# Available derives: Eq, Ord, Display, Debug, Hash, Json
\`\`\`

See [Type System -- Traits](/docs/type-system/#traits) for details.
```

2. **Add new "Numeric Traits" section** after Interfaces & Traits:

```markdown
## Numeric Traits

\`\`\`mesh
# Operator overloading via traits
impl Add for Vec2 do
  type Output = Vec2
  fn add(self, other :: Vec2) -> Vec2 do
    Vec2 { x: self.x + other.x, y: self.y + other.y }
  end
end

# Available: Add (+), Sub (-), Mul (*), Div (/), Neg (unary -)
let sum = v1 + v2     # calls Add.add
let neg = -v1         # calls Neg.neg
\`\`\`

See [Type System -- Numeric Traits](/docs/type-system/#numeric-traits) for details.
```

3. **Add new "From/Into Conversion" section** after Numeric Traits:

```markdown
## From/Into Conversion

\`\`\`mesh
# User-defined conversion
impl From<Int> for Wrapper do
  fn from(n :: Int) -> Wrapper do
    Wrapper { value: n }
  end
end
let w = Wrapper.from(42)

# Built-in conversions
let f = Float.from(42)       # Int -> Float
let s = String.from(42)      # Int -> String

# ? operator auto-converts error types via From
fn process() -> Int!AppError do
  let n = risky()?  # String error auto-converts to AppError
  Ok(n)
end
\`\`\`

See [Type System -- From/Into](/docs/type-system/#from-into-conversion) for details.
```

4. **Add new "Iterators" section** after From/Into Conversion:

```markdown
## Iterators

\`\`\`mesh
# Create iterator from collection
let iter = Iter.from([1, 2, 3, 4, 5])

# Lazy combinators (chained with pipe operator)
Iter.from(list) |> Iter.map(fn x -> x * 2 end)
Iter.from(list) |> Iter.filter(fn x -> x > 3 end)
Iter.from(list) |> Iter.take(3)
Iter.from(list) |> Iter.skip(2)
Iter.from(list) |> Iter.enumerate()
Iter.from(a) |> Iter.zip(Iter.from(b))

# Terminal operations
Iter.from(list) |> Iter.count()
Iter.from(list) |> Iter.sum()
Iter.from(list) |> Iter.any(fn x -> x > 3 end)
Iter.from(list) |> Iter.all(fn x -> x > 0 end)
Iter.from(list) |> Iter.reduce(0, fn acc, x -> acc + x end)

# Collect into collections
Iter.from(list) |> Iter.map(fn x -> x * 2 end) |> List.collect()
Iter.from(list) |> Iter.enumerate() |> Map.collect()
Iter.from(list) |> Set.collect()
Iter.from(strings) |> String.collect()
\`\`\`

See [Iterators](/docs/iterators/) for details.
```

**Language Basics updates (`website/docs/docs/language-basics/index.md`):**

1. **Update the "What's Next?" section** (at the end of the file, currently line ~592-597). Add a link to the Iterators page between Type System and Concurrency:

Change from:
```markdown
## What's Next?

You now have a solid foundation in the Mesh language. Continue with:

- [Type System](/docs/type-system/) -- structs, sum types, deriving, and advanced type features
- [Concurrency](/docs/concurrency/) -- actors, message passing, supervision trees, and services
- [Syntax Cheatsheet](/docs/cheatsheet/) -- quick reference for all Mesh syntax
```

To:
```markdown
## What's Next?

You now have a solid foundation in the Mesh language. Continue with:

- [Type System](/docs/type-system/) -- structs, sum types, traits, and advanced type features
- [Iterators](/docs/iterators/) -- lazy iterator pipelines, combinators, and collection materialization
- [Concurrency](/docs/concurrency/) -- actors, message passing, supervision trees, and services
- [Syntax Cheatsheet](/docs/cheatsheet/) -- quick reference for all Mesh syntax
```

Note: changed "deriving" to "traits" in the Type System description since the page now covers custom interfaces, associated types, numeric traits, and From/Into in addition to deriving.
  </action>
  <verify>
1. `grep "interface Greeter" website/docs/docs/cheatsheet/index.md` -- interface definition in cheatsheet
2. `grep "Iter.from" website/docs/docs/cheatsheet/index.md` -- iterator entries in cheatsheet
3. `grep "From/Into" website/docs/docs/cheatsheet/index.md` -- From/Into section in cheatsheet
4. `grep "Numeric Traits" website/docs/docs/cheatsheet/index.md` -- numeric traits section in cheatsheet
5. `grep "/docs/iterators/" website/docs/docs/language-basics/index.md` -- cross-link to iterators page
6. `grep "traits" website/docs/docs/language-basics/index.md` -- updated type system description
  </verify>
  <done>Cheatsheet has entries for interfaces, associated types, numeric traits, From/Into, iterators, and collect. Language Basics links to Iterators page in What's Next section.</done>
</task>

</tasks>

<verification>
1. `grep "interface keyword" website/docs/docs/type-system/index.md` -- corrected terminology
2. `grep -c "trait keyword" website/docs/docs/type-system/index.md` -- 0 occurrences (old text removed)
3. `grep "Associated Types" website/docs/docs/type-system/index.md` -- new section present
4. `grep "Numeric Traits" website/docs/docs/type-system/index.md` -- new section present
5. `grep "From/Into" website/docs/docs/type-system/index.md` -- new section present
6. `grep "Iterators" website/docs/docs/cheatsheet/index.md` -- new section present
7. `grep "/docs/iterators/" website/docs/docs/language-basics/index.md` -- cross-link present
8. `grep "/docs/iterators/" website/docs/docs/type-system/index.md` -- cross-link present
</verification>

<success_criteria>
- Type System page uses `interface` keyword (not `trait`) in all code
- Type System page has sections for custom interfaces, Associated Types, Numeric Traits, and From/Into Conversion
- Cheatsheet has entries for interfaces, associated types, numeric traits, From/Into, iterators, and collect
- Language Basics links to Iterators page
- All code examples are from verified E2E test files
- No new Vue components or infrastructure changes
</success_criteria>

<output>
After completion, create `.planning/phases/80-documentation-update-for-v7-0-apis/80-02-SUMMARY.md`
</output>
