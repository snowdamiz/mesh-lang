---
phase: 72-docs-infrastructure-core-content
plan: 02
type: execute
wave: 2
depends_on: ["72-01"]
files_modified:
  - website/docs/.vitepress/theme/components/docs/DocsLayout.vue
  - website/docs/.vitepress/theme/components/docs/DocsSidebar.vue
  - website/docs/.vitepress/theme/components/docs/DocsSidebarGroup.vue
  - website/docs/.vitepress/theme/components/docs/DocsSidebarItem.vue
  - website/docs/.vitepress/theme/components/docs/DocsTableOfContents.vue
  - website/docs/.vitepress/theme/components/docs/DocsOutlineItem.vue
  - website/docs/.vitepress/theme/components/docs/DocsPrevNext.vue
  - website/docs/.vitepress/theme/components/docs/MobileSidebar.vue
  - website/docs/.vitepress/theme/Layout.vue
  - website/docs/.vitepress/theme/components/NavBar.vue
autonomous: true

must_haves:
  truths:
    - "Docs pages render in a three-column layout: sidebar (>=960px), content (always), TOC (>=1280px)"
    - "Sidebar shows section groups with collapsible toggle, current page link is visually highlighted"
    - "On mobile (<960px), sidebar opens as a Sheet overlay from the left and auto-closes on link tap"
    - "Right-side TOC lists h2 and h3 headings from the current page and updates on navigation"
    - "Previous/next links appear at the bottom of every docs page"
    - "NavBar shows a hamburger menu button on mobile to open the sidebar"
  artifacts:
    - path: "website/docs/.vitepress/theme/components/docs/DocsLayout.vue"
      provides: "Three-column responsive docs layout container"
      min_lines: 30
    - path: "website/docs/.vitepress/theme/components/docs/DocsSidebar.vue"
      provides: "Left sidebar with ScrollArea and section group list"
      min_lines: 20
    - path: "website/docs/.vitepress/theme/components/docs/DocsSidebarGroup.vue"
      provides: "Collapsible sidebar section group with expand/collapse toggle"
      min_lines: 20
    - path: "website/docs/.vitepress/theme/components/docs/DocsSidebarItem.vue"
      provides: "Individual sidebar link with active state styling"
      min_lines: 10
    - path: "website/docs/.vitepress/theme/components/docs/DocsTableOfContents.vue"
      provides: "Right-side outline panel with heading links"
      min_lines: 20
    - path: "website/docs/.vitepress/theme/components/docs/DocsPrevNext.vue"
      provides: "Previous/next page navigation footer"
      min_lines: 15
    - path: "website/docs/.vitepress/theme/components/docs/MobileSidebar.vue"
      provides: "Sheet-based mobile sidebar overlay"
      min_lines: 15
    - path: "website/docs/.vitepress/theme/Layout.vue"
      provides: "Updated layout routing: home -> LandingPage, docs -> DocsLayout"
      contains: "DocsLayout"
    - path: "website/docs/.vitepress/theme/components/NavBar.vue"
      provides: "Updated NavBar with mobile sidebar toggle button"
      contains: "sidebar"
  key_links:
    - from: "website/docs/.vitepress/theme/components/docs/DocsLayout.vue"
      to: "website/docs/.vitepress/theme/composables/useSidebar.ts"
      via: "imports useSidebar for sidebar data and responsive state"
      pattern: "import.*useSidebar"
    - from: "website/docs/.vitepress/theme/components/docs/DocsSidebarGroup.vue"
      to: "website/docs/.vitepress/theme/components/ui/collapsible/"
      via: "uses Collapsible, CollapsibleTrigger, CollapsibleContent for accessible toggle"
      pattern: "import.*Collapsible"
    - from: "website/docs/.vitepress/theme/components/docs/DocsSidebar.vue"
      to: "website/docs/.vitepress/theme/components/ui/scroll-area/"
      via: "wraps sidebar content in ScrollArea for custom scrollbar"
      pattern: "import.*ScrollArea"
    - from: "website/docs/.vitepress/theme/components/docs/DocsTableOfContents.vue"
      to: "website/docs/.vitepress/theme/composables/useOutline.ts"
      via: "imports useOutline for heading data"
      pattern: "import.*useOutline"
    - from: "website/docs/.vitepress/theme/components/docs/DocsPrevNext.vue"
      to: "website/docs/.vitepress/theme/composables/usePrevNext.ts"
      via: "imports usePrevNext for prev/next link data"
      pattern: "import.*usePrevNext"
    - from: "website/docs/.vitepress/theme/components/docs/MobileSidebar.vue"
      to: "website/docs/.vitepress/theme/components/ui/sheet/"
      via: "uses Sheet, SheetContent, SheetTitle for mobile overlay"
      pattern: "import.*Sheet"
    - from: "website/docs/.vitepress/theme/Layout.vue"
      to: "website/docs/.vitepress/theme/components/docs/DocsLayout.vue"
      via: "imports and renders DocsLayout for non-home pages with sidebar"
      pattern: "import.*DocsLayout"
    - from: "website/docs/.vitepress/theme/components/docs/DocsSidebarItem.vue"
      to: "website/docs/.vitepress/theme/composables/useSidebar.ts"
      via: "imports isActive for current page highlight"
      pattern: "import.*isActive"
---

<objective>
Build all documentation layout Vue components: three-column DocsLayout, DocsSidebar with collapsible groups, DocsTableOfContents, DocsPrevNext footer, MobileSidebar via Sheet, and wire everything into Layout.vue with NavBar mobile toggle.

Purpose: This is the core docs infrastructure that transforms the site from a single landing page into a navigable documentation site. Every docs page will use this layout.
Output: 8 new Vue components in components/docs/, updated Layout.vue and NavBar.vue.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/72-docs-infrastructure-core-content/72-RESEARCH.md
@.planning/phases/72-docs-infrastructure-core-content/72-01-SUMMARY.md

@website/docs/.vitepress/theme/Layout.vue
@website/docs/.vitepress/theme/components/NavBar.vue
@website/docs/.vitepress/theme/composables/useSidebar.ts
@website/docs/.vitepress/theme/composables/useOutline.ts
@website/docs/.vitepress/theme/composables/usePrevNext.ts
@website/docs/.vitepress/config.mts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create docs layout components</name>
  <files>
    website/docs/.vitepress/theme/components/docs/DocsLayout.vue
    website/docs/.vitepress/theme/components/docs/DocsSidebar.vue
    website/docs/.vitepress/theme/components/docs/DocsSidebarGroup.vue
    website/docs/.vitepress/theme/components/docs/DocsSidebarItem.vue
    website/docs/.vitepress/theme/components/docs/DocsTableOfContents.vue
    website/docs/.vitepress/theme/components/docs/DocsOutlineItem.vue
    website/docs/.vitepress/theme/components/docs/DocsPrevNext.vue
    website/docs/.vitepress/theme/components/docs/MobileSidebar.vue
  </files>
  <action>
    Create the components/docs/ directory and all 8 Vue components:

    **DocsLayout.vue** -- Three-column responsive container:
    - Import useSidebar from composables, useMediaQuery from @vueuse/core
    - Get { sidebar, hasSidebar } from useSidebar()
    - Create isDesktop = useMediaQuery('(min-width: 960px)'), isWide = useMediaQuery('(min-width: 1280px)')
    - Template: div.relative.mx-auto.flex.max-w-[90rem] containing:
      a) Desktop sidebar: aside (v-if hasSidebar && isDesktop) with classes "sticky top-14 h-[calc(100vh-3.5rem)] w-64 shrink-0 border-r border-border", renders DocsSidebar
      b) Mobile sidebar: MobileSidebar (v-if hasSidebar && !isDesktop) with :items="sidebar"
      c) Main content: main.min-w-0.flex-1.px-6.py-8.lg:px-8 containing:
         - div.docs-content.prose.dark:prose-invert.max-w-none wrapping Content (imported from 'vitepress')
         - DocsPrevNext with class mt-12
      d) Right aside: aside (v-if isWide) with classes "sticky top-14 h-[calc(100vh-3.5rem)] w-56 shrink-0 pl-4", renders DocsTableOfContents
    - CRITICAL: Use `max-w-none` on prose div to prevent the default 65ch max-width constraint

    **DocsSidebar.vue** -- Left sidebar panel:
    - Accept props: items (SidebarItem array)
    - Wrap content in ScrollArea from '@/components/ui/scroll-area' with class "h-full py-4 px-3"
    - Render each top-level item: if item has items array, render DocsSidebarGroup; otherwise render DocsSidebarItem
    - The sidebar itself does NOT manage open/close state -- that's in useSidebar composable

    **DocsSidebarGroup.vue** -- Collapsible section group:
    - Accept props: item (SidebarItem with text, items, collapsed)
    - Import Collapsible, CollapsibleTrigger, CollapsibleContent from '@/components/ui/collapsible'
    - If item.collapsed is undefined (not collapsible): render the group heading as a static div.font-semibold.text-sm.text-foreground.mb-1 with the group text, then a ul of DocsSidebarItem children
    - If item.collapsed is boolean (collapsible): wrap in Collapsible with v-model:open bound to a local ref initialized to !item.collapsed (false = starts collapsed, so open starts as true). CollapsibleTrigger renders group heading with a ChevronRight icon (from lucide-vue-next) that rotates 90deg when open. CollapsibleContent wraps the ul of children.
    - Group items are spaced with gap-0.5

    **DocsSidebarItem.vue** -- Individual sidebar link:
    - Accept props: item (SidebarItem with text, link)
    - Import isActive from composables/useSidebar and useData from 'vitepress'
    - Get page from useData()
    - Compute active = isActive(page.value.relativePath, item.link)
    - Render as an <a> tag with :href="item.link" and conditional classes:
      - Active: "bg-accent text-accent-foreground font-medium" (highlighted)
      - Inactive: "text-muted-foreground hover:text-foreground hover:bg-accent/50"
      - Common: "block rounded-md px-2 py-1.5 text-sm transition-colors"
    - If item has child items, render them recursively with left padding (pl-3)

    **DocsTableOfContents.vue** -- Right-side "On this page" panel:
    - Import useOutline from composables, useData from 'vitepress'
    - Get { headers } from useOutline()
    - Get { theme } from useData() to read theme.value.outline?.label (default "On this page")
    - Template: nav.py-4 with ScrollArea. Show heading label as div.font-semibold.text-sm.mb-3. Render DocsOutlineItem for each header in headers.value
    - Only show if headers.value.length > 0

    **DocsOutlineItem.vue** -- Recursive outline heading:
    - Accept props: headers (OutlineItem[]), root (boolean, default true)
    - Render ul (root) or nested ul for children
    - Each item is an <a :href="item.link"> with text-sm, text-muted-foreground, hover:text-foreground, transition-colors, block py-1
    - If item has children, render DocsOutlineItem recursively with pl-3

    **DocsPrevNext.vue** -- Previous/next footer:
    - Import usePrevNext from composables
    - Get prevNext = usePrevNext()
    - Template: div.flex.justify-between.border-t.border-border.pt-6
      - Left: a with ChevronLeft icon + prevNext.value.prev?.text (if prev exists)
      - Right: a with prevNext.value.next?.text + ChevronRight icon (if next exists)
    - Style: text-sm text-primary hover:text-foreground transition-colors
    - Use flex with ml-auto on next to push it right when no prev

    **MobileSidebar.vue** -- Sheet-based mobile overlay:
    - Import Sheet, SheetContent, SheetTitle from '@/components/ui/sheet'
    - Import useSidebar from composables and DocsSidebar
    - Accept props: items (SidebarItem array)
    - Get { isOpen } from useSidebar()
    - Template: Sheet with v-model:open="isOpen", SheetContent side="left" class="w-72 p-0", SheetTitle with class "sr-only" text "Navigation", then DocsSidebar :items="items"
    - IMPORTANT: The route change watcher in useSidebar automatically sets isOpen=false, which closes the Sheet on navigation
  </action>
  <verify>
    - `ls website/docs/.vitepress/theme/components/docs/` shows all 8 .vue files
    - `grep "useSidebar" website/docs/.vitepress/theme/components/docs/DocsLayout.vue` confirms composable import
    - `grep "Collapsible" website/docs/.vitepress/theme/components/docs/DocsSidebarGroup.vue` confirms shadcn-vue usage
    - `grep "ScrollArea" website/docs/.vitepress/theme/components/docs/DocsSidebar.vue` confirms ScrollArea usage
    - `grep "useOutline" website/docs/.vitepress/theme/components/docs/DocsTableOfContents.vue` confirms composable import
    - `grep "usePrevNext" website/docs/.vitepress/theme/components/docs/DocsPrevNext.vue` confirms composable import
    - `grep "Sheet" website/docs/.vitepress/theme/components/docs/MobileSidebar.vue` confirms Sheet usage
  </verify>
  <done>
    All 8 docs layout components created in components/docs/ directory. DocsLayout provides three-column responsive layout. DocsSidebarGroup uses Collapsible. DocsSidebar uses ScrollArea. DocsTableOfContents uses useOutline. DocsPrevNext uses usePrevNext. MobileSidebar uses Sheet. All composable and UI primitive links are wired.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire DocsLayout into Layout.vue and add NavBar mobile toggle</name>
  <files>
    website/docs/.vitepress/theme/Layout.vue
    website/docs/.vitepress/theme/components/NavBar.vue
  </files>
  <action>
    1. Update Layout.vue:
       - Import DocsLayout from './components/docs/DocsLayout.vue'
       - Import useSidebar from '@/composables/useSidebar'
       - Get { hasSidebar } from useSidebar()
       - Update template routing:
         a) LandingPage: v-if="frontmatter.layout === 'home'" (existing)
         b) DocsLayout: v-else-if="hasSidebar" -- renders three-column layout with sidebar
         c) Default: v-else -- keep existing simple main.mx-auto.max-w-4xl wrapper with Content for non-docs pages (like 404, standalone pages)
       - Remove the existing bare `<main>` wrapper from v-else since DocsLayout handles its own main element

    2. Update NavBar.vue:
       - Import useSidebar from '@/composables/useSidebar'
       - Import Menu icon from 'lucide-vue-next'
       - Get { hasSidebar, is960, toggle } from useSidebar()
       - Add a hamburger button (Menu icon) to the left side of the NavBar, visible only when hasSidebar && !is960 (mobile docs pages)
       - Button classes: "inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
       - The button calls toggle() on click to open/close the mobile sidebar
       - Place the button before the logo/wordmark, separated by a small gap

    3. Create a temporary test docs page at website/docs/docs/getting-started/index.md with frontmatter `title: Getting Started` and a few headings (## Installation, ## Hello World, ## Next Steps) plus placeholder text to verify the layout renders.

    4. Verify `cd website && npm run build` passes.

    5. Optionally: run `cd website && npx vitepress dev docs` briefly to confirm the docs page renders with sidebar, or just confirm the build produces the expected HTML structure.
  </action>
  <verify>
    - `grep "DocsLayout" website/docs/.vitepress/theme/Layout.vue` shows import and usage
    - `grep "hasSidebar" website/docs/.vitepress/theme/Layout.vue` shows conditional routing
    - `grep "Menu" website/docs/.vitepress/theme/components/NavBar.vue` shows hamburger icon import
    - `grep "toggle" website/docs/.vitepress/theme/components/NavBar.vue` shows mobile toggle wiring
    - `cat website/docs/docs/getting-started/index.md` shows test page exists
    - `cd website && npm run build` succeeds without errors
  </verify>
  <done>
    Layout.vue routes docs pages through DocsLayout (three-column layout with sidebar, content, TOC). NavBar shows hamburger menu button on mobile docs pages. Test docs page at /docs/getting-started/ renders with sidebar visible. Build passes.
  </done>
</task>

</tasks>

<verification>
- Three-column layout renders: sidebar on left (>=960px), content center, TOC on right (>=1280px)
- Sidebar shows 3 groups (Getting Started, Language Guide, Reference) with correct links
- Collapsible groups expand/collapse when clicked
- Mobile hamburger button appears in NavBar below 960px
- Mobile sidebar opens as Sheet overlay from left
- TOC shows headings from test page
- Previous/next links show at bottom
- prose styling applies to markdown content
- `cd website && npm run build` passes
</verification>

<success_criteria>
1. 8 Vue component files exist in components/docs/
2. Layout.vue has three-way routing (home, docs with sidebar, default)
3. NavBar.vue has mobile sidebar toggle button
4. DocsLayout imports useSidebar and renders three columns responsively
5. Test docs page at /docs/getting-started/ builds successfully
6. Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/72-docs-infrastructure-core-content/72-02-SUMMARY.md`
</output>
