---
phase: 72-docs-infrastructure-core-content
plan: 04
type: execute
wave: 3
depends_on: ["72-02"]
files_modified:
  - website/docs/docs/type-system/index.md
  - website/docs/docs/concurrency/index.md
  - website/docs/docs/cheatsheet/index.md
autonomous: true

must_haves:
  truths:
    - "Documentation covers the type system: type inference, generics, structs, sum types, traits, deriving"
    - "Documentation covers concurrency: actor model, spawning, message passing, linking/monitoring, supervision, GenServer/services"
    - "A syntax cheatsheet provides a single-page quick reference for all Mesh syntax, operators, and types"
    - "All Mesh code examples use ```mesh fences and are based on verified e2e test syntax"
  artifacts:
    - path: "website/docs/docs/type-system/index.md"
      provides: "Type System guide covering inference, generics, structs, sum types, traits, deriving"
      contains: "Type System"
      min_lines: 180
    - path: "website/docs/docs/concurrency/index.md"
      provides: "Concurrency guide covering actors, spawning, messaging, linking, supervision, services"
      contains: "Concurrency"
      min_lines: 180
    - path: "website/docs/docs/cheatsheet/index.md"
      provides: "Syntax cheatsheet with quick reference tables for syntax, operators, types"
      contains: "Cheatsheet"
      min_lines: 100
  key_links:
    - from: "website/docs/docs/type-system/index.md"
      to: "website/docs/.vitepress/config.mts"
      via: "sidebar config links to /docs/type-system/"
      pattern: "/docs/type-system/"
    - from: "website/docs/docs/concurrency/index.md"
      to: "website/docs/.vitepress/config.mts"
      via: "sidebar config links to /docs/concurrency/"
      pattern: "/docs/concurrency/"
    - from: "website/docs/docs/cheatsheet/index.md"
      to: "website/docs/.vitepress/config.mts"
      via: "sidebar config links to /docs/cheatsheet/"
      pattern: "/docs/cheatsheet/"
---

<objective>
Write the Type System documentation (DOCS-03), Concurrency documentation (DOCS-04), and Syntax Cheatsheet (DOCS-09) as markdown files with Mesh code examples.

Purpose: Completes the core documentation content. Type System and Concurrency are Mesh's differentiating features. The Cheatsheet provides quick reference for developers already familiar with the language.
Output: Three complete markdown documentation files.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/72-docs-infrastructure-core-content/72-RESEARCH.md

@tests/e2e/adts.mpl
@tests/e2e/actors_basic.mpl
@tests/e2e/actors_messaging.mpl
@tests/e2e/actors_linking.mpl
@tests/e2e/comprehensive.mpl
@tests/e2e/deriving_backward_compat.mpl
@tests/e2e/generics_basic.mpl
@tests/e2e/genserver_basic.mpl
@tests/e2e/supervisor_basic.mpl
@tests/e2e/trait_basic.mpl
@tests/e2e/modules_basic.mpl
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write Type System documentation (DOCS-03)</name>
  <files>
    website/docs/docs/type-system/index.md
  </files>
  <action>
    Create the Type System guide.

    Frontmatter:
    ```
    ---
    title: Type System
    ---
    ```

    Structure (## for main sections, ### for subsections):

    **# Type System**
    Brief intro: Mesh has a powerful static type system with full type inference. You rarely need to write type annotations -- the compiler figures out types from context. When you do annotate, you get compile-time safety guarantees.

    **## Type Inference**
    - The compiler infers types from usage: `let x = 42` infers Int, `let name = "hello"` infers String
    - Function return types can be inferred: `fn double(x :: Int) do x * 2 end` infers -> Int
    - When to add annotations: function signatures for clarity, complex generic functions
    - Show example with and without annotations

    **## Generics**
    - Generic functions: `fn identity<T>(x :: T) -> T do x end`
    - Generic types: `struct Pair<A, B> do first :: A second :: B end`
    - Constraint syntax with traits (brief, link to Traits section)
    - Show 2-3 examples based on e2e tests (generics_basic.mpl)

    **## Structs**
    - `struct Name do field :: Type end` syntax
    - Struct instantiation: `Name { field: value }`
    - Field access: `instance.field`
    - Deriving capabilities (intro, full section below)
    - Example: Point struct from research

    **## Sum Types**
    - `type Name do Variant1 Variant2(Type) end` syntax
    - Pattern matching on variants with `case`
    - Variants can carry data: `Some(value)` / `None`
    - The built-in Option type
    - Example: Color type from research, plus a Result-like type

    **## Traits**
    - `trait Name do fn method(self) -> ReturnType end` syntax
    - Implementing traits: `impl TraitName for TypeName do...end`
    - Built-in traits: Eq, Ord, Display, Debug, Hash
    - Trait bounds on generic functions
    - Show examples from trait_basic.mpl

    **## Deriving**
    - `end deriving(Trait1, Trait2)` syntax on structs and sum types
    - Available derives: Eq, Ord, Display, Debug, Hash, Json
    - Automatic implementation generation
    - Example: `struct Point do x :: Int y :: Int end deriving(Eq, Ord, Display, Debug, Hash)`
    - Show struct and sum type deriving examples

    CRITICAL: Check tests/e2e/generics_basic.mpl, tests/e2e/trait_basic.mpl, tests/e2e/adts.mpl, tests/e2e/deriving_backward_compat.mpl for correct syntax before writing examples. Use ```mesh fences for all code blocks.
  </action>
  <verify>
    - `cat website/docs/docs/type-system/index.md | head -5` shows frontmatter
    - `grep -c '```mesh' website/docs/docs/type-system/index.md` shows at least 8 mesh code blocks
    - `grep "## Structs" website/docs/docs/type-system/index.md` confirms section exists
    - `grep "## Sum Types" website/docs/docs/type-system/index.md` confirms section exists
    - `grep "## Traits" website/docs/docs/type-system/index.md` confirms section exists
    - `grep "## Deriving" website/docs/docs/type-system/index.md` confirms section exists
    - `wc -l website/docs/docs/type-system/index.md` shows at least 180 lines
    - `cd website && npm run build` passes
  </verify>
  <done>
    Type System documentation covers type inference, generics, structs, sum types, traits, and deriving with Mesh code examples. All examples use verified syntax from e2e tests.
  </done>
</task>

<task type="auto">
  <name>Task 2: Write Concurrency docs and Syntax Cheatsheet (DOCS-04, DOCS-09)</name>
  <files>
    website/docs/docs/concurrency/index.md
    website/docs/docs/cheatsheet/index.md
  </files>
  <action>
    **Part A: Concurrency guide (DOCS-04)**

    Frontmatter:
    ```
    ---
    title: Concurrency
    ---
    ```

    Structure:

    **# Concurrency**
    Intro: Mesh uses the actor model for concurrency, inspired by Erlang/Elixir. Actors are lightweight processes that communicate via message passing. They are isolated, supervised, and fault-tolerant.

    **## The Actor Model**
    - Brief explanation: actors are independent units of computation that don't share memory
    - Each actor has a mailbox for receiving messages
    - Actors communicate exclusively via message passing
    - Failures are isolated -- one actor crashing doesn't bring down others

    **## Spawning Actors**
    - `actor name() do...end` syntax
    - `let pid = spawn(name)` to start an actor
    - Actors run concurrently with the spawning function
    - The spawn function returns a PID (process identifier)
    - Show basic actor example from research/e2e tests

    **## Message Passing**
    - `send(pid, message)` to send a message to an actor
    - `receive do...end` to wait for and pattern match on messages
    - Messages are processed one at a time from the actor's mailbox
    - Pattern matching in receive blocks
    - Show send/receive example from actors_messaging.mpl

    **## Linking and Monitoring**
    - `link(pid)` to bidirectionally link two actors (if one dies, the other is notified)
    - `monitor(pid)` to unidirectionally monitor an actor
    - Handling exit signals
    - Show example based on actors_linking.mpl

    **## Supervision**
    - `supervisor Name do...end` syntax
    - Strategies: one_for_one, one_for_all, rest_for_one
    - Child specifications: start, restart, shutdown
    - Restart limits: max_restarts, max_seconds
    - Show supervisor example from research
    - Reference supervisor_basic.mpl for correct syntax

    **## Services (GenServer)**
    - `service Name do...end` syntax
    - init function for initial state
    - `call` for synchronous request/response (returns tuple of (reply, new_state))
    - `cast` for asynchronous fire-and-forget (returns new state)
    - Show the Store service example from research
    - Reference genserver_basic.mpl for correct syntax

    **Part B: Syntax Cheatsheet (DOCS-09)**

    Frontmatter:
    ```
    ---
    title: Syntax Cheatsheet
    ---
    ```

    Structure -- a quick reference page organized as concise tables and short code snippets:

    **# Syntax Cheatsheet**

    **## Basics**
    Table: Variable binding (let x = ...), Type annotation (x :: Type), String interpolation ("${expr}"), Comment (# comment)

    **## Types**
    Table: Int, Float, String, Bool, Nil, List<T>, Map<K,V>, Option<T>, and custom types

    **## Functions**
    Short examples: fn definition, anonymous functions/closures, pipe operator

    **## Control Flow**
    Short examples: if/else, case/pattern match, for, while, break, continue

    **## Structs & Types**
    Short examples: struct definition, sum type, deriving

    **## Traits**
    Short examples: trait definition, impl, trait bounds

    **## Concurrency**
    Short examples: actor, spawn, send, receive, supervisor, service

    **## Modules**
    Short examples: module definition, module function access

    **## Operators**
    Table: Arithmetic (+, -, *, /, %), Comparison (==, !=, <, >, <=, >=), Logical (and, or, not), Pipe (|>), String concat (++)

    Keep each section to 3-8 lines of code max. This is a REFERENCE page, not a tutorial. Link to the relevant full guide sections for details.

    CRITICAL: Check e2e test files for syntax accuracy before writing ANY code example. Use ```mesh fences for all code blocks.
  </action>
  <verify>
    - `cat website/docs/docs/concurrency/index.md | head -5` shows frontmatter
    - `grep -c '```mesh' website/docs/docs/concurrency/index.md` shows at least 8 mesh code blocks
    - `grep "## Spawning" website/docs/docs/concurrency/index.md` confirms section exists
    - `grep "## Supervision" website/docs/docs/concurrency/index.md` confirms section exists
    - `grep "## Services" website/docs/docs/concurrency/index.md` confirms section exists
    - `wc -l website/docs/docs/concurrency/index.md` shows at least 180 lines
    - `cat website/docs/docs/cheatsheet/index.md | head -5` shows frontmatter
    - `grep "## Operators" website/docs/docs/cheatsheet/index.md` confirms section exists
    - `wc -l website/docs/docs/cheatsheet/index.md` shows at least 100 lines
    - `cd website && npm run build` passes
  </verify>
  <done>
    Concurrency documentation covers actor model, spawning, message passing, linking/monitoring, supervision, and services with verified code examples. Syntax cheatsheet provides single-page quick reference for all Mesh syntax, operators, and types. All examples use ```mesh fences.
  </done>
</task>

</tasks>

<verification>
- Type System doc covers all 6 required topics (inference, generics, structs, sum types, traits, deriving)
- Concurrency doc covers all 6 required topics (actors, spawning, messaging, linking/monitoring, supervision, services)
- Cheatsheet covers basics, types, functions, control flow, structs, traits, concurrency, modules, operators
- All markdown files have correct frontmatter titles
- All code blocks use ```mesh fences
- All 5 documentation pages now exist matching sidebar config links
- `cd website && npm run build` passes
</verification>

<success_criteria>
1. Type System guide covers inference, generics, structs, sum types, traits, and deriving
2. Concurrency guide covers actors, spawning, messaging, linking, supervision, and services
3. Syntax Cheatsheet provides quick reference tables for all syntax categories
4. All three files have 100+ lines each (Type System and Concurrency: 180+, Cheatsheet: 100+)
5. All Mesh code examples use ```mesh fences
6. Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/72-docs-infrastructure-core-content/72-04-SUMMARY.md`
</output>
